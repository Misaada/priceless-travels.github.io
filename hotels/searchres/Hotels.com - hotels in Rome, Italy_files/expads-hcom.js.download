!function(a,b,c){"use strict";var d=null;b.utils=b.utils||{},b.utils.emailRegex=/(?!\.)([a-zA-Z0-9\u0080-\u00FF\u0100-\u017F\u0180-\u024F\u0250-\u02AF\u0300-\u036F\u0370-\u03FF\u0400-\u04FF\u0500-\u052F\u0530-\u058F\u0590-\u05FF\u0600-\u06FF\u0700-\u074F\u0750-\u077F\u0780-\u07BF\u07C0-\u07FF\u0900-\u097F\u0980-\u09FF\u0A00-\u0A7F\u0A80-\u0AFF\u0B00-\u0B7F\u0B80-\u0BFF\u0C00-\u0C7F\u0C80-\u0CFF\u0D00-\u0D7F\u0D80-\u0DFF\u0E00-\u0E7F\u0E80-\u0EFF\u0F00-\u0FFF\u1000-\u109F\u10A0-\u10FF\u1100-\u11FF\u1200-\u137F\u1380-\u139F\u13A0-\u13FF\u1400-\u167F\u1680-\u169F\u16A0-\u16FF\u1700-\u171F\u1720-\u173F\u1740-\u175F\u1760-\u177F\u1780-\u17FF\u1800-\u18AF\u1900-\u194F\u1950-\u197F\u1980-\u19DF\u19E0-\u19FF\u1A00-\u1A1F\u1B00-\u1B7F\u1D00-\u1D7F\u1D80-\u1DBF\u1DC0-\u1DFF\u1E00-\u1EFF\u1F00-\u1FFF\u20D0-\u20FF\u2100-\u214F\u2C00-\u2C5F\u2C60-\u2C7F\u2C80-\u2CFF\u2D00-\u2D2F\u2D30-\u2D7F\u2D80-\u2DDF\u2F00-\u2FDF\u2FF0-\u2FFF\u3040-\u309F\u30A0-\u30FF\u3100-\u312F\u3130-\u318F\u3190-\u319F\u31C0-\u31EF\u31F0-\u31FF\u3200-\u32FF\u3300-\u33FF\u3400-\u4DBF\u4DC0-\u4DFF\u4E00-\u9FFF\uA000-\uA48F\uA490-\uA4CF\uA700-\uA71F\uA800-\uA82F\uA840-\uA87F\uAC00-\uD7AF\uF900-\uFAFF\.!#$%&'*+-\/=?^_`{|}~\-\d]+)(?:@|%(?:25)*40)(?!\.)([a-zA-Z0-9\u0080-\u00FF\u0100-\u017F\u0180-\u024F\u0250-\u02AF\u0300-\u036F\u0370-\u03FF\u0400-\u04FF\u0500-\u052F\u0530-\u058F\u0590-\u05FF\u0600-\u06FF\u0700-\u074F\u0750-\u077F\u0780-\u07BF\u07C0-\u07FF\u0900-\u097F\u0980-\u09FF\u0A00-\u0A7F\u0A80-\u0AFF\u0B00-\u0B7F\u0B80-\u0BFF\u0C00-\u0C7F\u0C80-\u0CFF\u0D00-\u0D7F\u0D80-\u0DFF\u0E00-\u0E7F\u0E80-\u0EFF\u0F00-\u0FFF\u1000-\u109F\u10A0-\u10FF\u1100-\u11FF\u1200-\u137F\u1380-\u139F\u13A0-\u13FF\u1400-\u167F\u1680-\u169F\u16A0-\u16FF\u1700-\u171F\u1720-\u173F\u1740-\u175F\u1760-\u177F\u1780-\u17FF\u1800-\u18AF\u1900-\u194F\u1950-\u197F\u1980-\u19DF\u19E0-\u19FF\u1A00-\u1A1F\u1B00-\u1B7F\u1D00-\u1D7F\u1D80-\u1DBF\u1DC0-\u1DFF\u1E00-\u1EFF\u1F00-\u1FFF\u20D0-\u20FF\u2100-\u214F\u2C00-\u2C5F\u2C60-\u2C7F\u2C80-\u2CFF\u2D00-\u2D2F\u2D30-\u2D7F\u2D80-\u2DDF\u2F00-\u2FDF\u2FF0-\u2FFF\u3040-\u309F\u30A0-\u30FF\u3100-\u312F\u3130-\u318F\u3190-\u319F\u31C0-\u31EF\u31F0-\u31FF\u3200-\u32FF\u3300-\u33FF\u3400-\u4DBF\u4DC0-\u4DFF\u4E00-\u9FFF\uA000-\uA48F\uA490-\uA4CF\uA700-\uA71F\uA800-\uA82F\uA840-\uA87F\uAC00-\uD7AF\uF900-\uFAFF\-\.\d]+)((\.([a-zA-Z\u0080-\u00FF\u0100-\u017F\u0180-\u024F\u0250-\u02AF\u0300-\u036F\u0370-\u03FF\u0400-\u04FF\u0500-\u052F\u0530-\u058F\u0590-\u05FF\u0600-\u06FF\u0700-\u074F\u0750-\u077F\u0780-\u07BF\u07C0-\u07FF\u0900-\u097F\u0980-\u09FF\u0A00-\u0A7F\u0A80-\u0AFF\u0B00-\u0B7F\u0B80-\u0BFF\u0C00-\u0C7F\u0C80-\u0CFF\u0D00-\u0D7F\u0D80-\u0DFF\u0E00-\u0E7F\u0E80-\u0EFF\u0F00-\u0FFF\u1000-\u109F\u10A0-\u10FF\u1100-\u11FF\u1200-\u137F\u1380-\u139F\u13A0-\u13FF\u1400-\u167F\u1680-\u169F\u16A0-\u16FF\u1700-\u171F\u1720-\u173F\u1740-\u175F\u1760-\u177F\u1780-\u17FF\u1800-\u18AF\u1900-\u194F\u1950-\u197F\u1980-\u19DF\u19E0-\u19FF\u1A00-\u1A1F\u1B00-\u1B7F\u1D00-\u1D7F\u1D80-\u1DBF\u1DC0-\u1DFF\u1E00-\u1EFF\u1F00-\u1FFF\u20D0-\u20FF\u2100-\u214F\u2C00-\u2C5F\u2C60-\u2C7F\u2C80-\u2CFF\u2D00-\u2D2F\u2D30-\u2D7F\u2D80-\u2DDF\u2F00-\u2FDF\u2FF0-\u2FFF\u3040-\u309F\u30A0-\u30FF\u3100-\u312F\u3130-\u318F\u3190-\u319F\u31C0-\u31EF\u31F0-\u31FF\u3200-\u32FF\u3300-\u33FF\u3400-\u4DBF\u4DC0-\u4DFF\u4E00-\u9FFF\uA000-\uA48F\uA490-\uA4CF\uA700-\uA71F\uA800-\uA82F\uA840-\uA87F\uAC00-\uD7AF\uF900-\uFAFF]){2,63})+)/i,b.utils.isArray=function(a){return"[object Array]"===Object.prototype.toString.call(a)},b.utils.isVisible=function(a){return null!==a&&b.utils.isParentVisible(a)},b.utils.isParentVisible=function(d){for(d!==c&&"function"==typeof d.getAttribute&&"true"===d.getAttribute("data-collapse-before-load")&&(d=d.parentNode);d!==c&&d.parentNode;){if(!b.utils.hasClass(d,"hidden-before-load")){if(a.getComputedStyle){var e=a.getComputedStyle(d,"");if("none"==e.display)return!1;if("hidden"==e.visibility)return!1}if(d.style){if("none"==d.style.display)return!1;if("hidden"==d.style.visibility)return!1}}if(d=d.parentNode,d==document)return!0}return!1},b.utils.hasClass=function(a,b){return a.className&&new RegExp("(^|\\s)"+b+"(\\s|$)").test(a.className)},b.utils.resize=function(a){try{var c=document.getElementById(a);if(b.utils.isLoaded(c)){var d=c.getElementsByTagName("iframe")[0],e=d.contentDocument||d.contentWindow.document,f="Height",g="scroll"+f,h="offset"+f,i=Math.max(e.body[g],e.documentElement[g],e.body[h],e.documentElement[h],e.documentElement["client"+f]);c.style.height=i+"px",d.style.height=i+"px"}}catch(j){b.logging.logError(j,["adAction=expads.utils.resize","id="+a])}},b.utils.isForceLoad=function(a){return null!==a&&"true"===a.getAttribute("data-force-load")},b.utils.toggleCollapsedExpanded=function(a,b){a&&a.className!==c&&(a.className=a.className.replace(/(?:^|\s)expanded(?!\S)/g,""),a.className=a.className.replace(/(?:^|\s)collapsed(?!\S)/g,""),b?a.className+=" expanded":a.className+=" collapsed")},b.utils.isLoaded=function(a){return null!==a&&"true"===a.getAttribute("data-loaded")};var e=function(){for(var a=3,b=document.createElement("div"),d=b.getElementsByTagName("i");b.innerHTML="<!--[if gt IE "+ ++a+"]><i></i><![endif]-->",d[0];);return a>4?a:c}();b.utils.ajax=function(d){d=d||{},d.always=d.always||function(){},d.done=d.done||function(){},d.fail=d.fail||function(){},d.dataType=d.dataType||"",d.type=d.type||"GET",d.url=d.url||null,d.encode===c&&(d.encode=!0);var f;if(e<10&&a.XDomainRequest){var g=new XDomainRequest;d.encode?g.open(d.type,encodeURI(d.url)):g.open(d.type,d.url),d.timeout&&(g.timeout=d.timeout),g.onprogress=function(){},g.ontimeout=function(){},g.onload=function(){var a=g.responseText;if(d.dataType&&"json"===d.dataType.toLowerCase()&&"string"==typeof a)try{a=JSON.parse(a),d.done(a,g)}catch(c){b.logging.logError(c,["adAction=expads.utils.ajax"]),d.fail(g)}},g.onerror=function(){d.fail(g)},setTimeout(function(){g.send(d.data)},0)}else a.XMLHttpRequest&&(f=new XMLHttpRequest,f.onreadystatechange=function(){var a;4===f.readyState&&(200===f.status?(f.response?a=f.response:!f.responseType||""!==f.responseType&&"text"!==f.responseType||(a=f.responseText),d.dataType&&"json"===d.dataType.toLowerCase()&&"string"==typeof a&&(a=JSON.parse(a)),d.done(a,f)):d.fail(f),d.always(f,a))},d.encode?f.open(d.type,encodeURI(d.url)):f.open(d.type,d.url),d.contentType&&f.setRequestHeader("Content-Type",d.contentType),d.xhrFields&&d.xhrFields.withCredentials&&(f.withCredentials=!0),d.timeout&&(f.timeout=d.timeout),f.responseType=d.dataType,f.send(d.data))},b.utils.isForceLoad=function(a){return null!==a&&"true"===a.getAttribute("data-force-load")},b.utils.formatDateToISOSpecification=function(a,b,c){return a+"-"+b+"-"+c},b.utils.logTimeTakenToCompleteAPICall=function(a,c,d){var e=c-a;b.logging.logMessage(d,["totalTime="+e])},b.utils.isEmptyObject=function(a){var b;if(a)for(b in a)if(a.hasOwnProperty(b))return!1;return!0},b.utils.getCacheProofUrl=function(a){return a&&(a+=a.indexOf("?")>0?"&":"?",a=a+"uncacheParam="+Math.random()),a},b.utils.isLocalStorageAvailable=function(){if(null===d)try{a.localStorage.setItem("AdEng","is super cool");var b=a.localStorage.getItem("AdEng");a.localStorage.removeItem("AdEng"),d="is super cool"===b}catch(c){d=!1}return d},b.utils.mergeObjects=function(a,b){var c,d={},e=function(a){return JSON.parse(JSON.stringify(a))};if(a)for(c in a)a.hasOwnProperty(c)&&(d[c]=e(a[c]));if(b)for(c in b)b.hasOwnProperty(c)&&(d[c]=e(b[c]));return d},b.utils.resetLocalStorageAvailability=function(){d=null},b.utils.mergeTargetingAndUpdateLocalStorage=function(d){var e={};return b.mergedTargeting!==c&&(e=b.utils.mergeObjects(e,b.mergedTargeting)),e=b.utils.mergeObjects(e,b.targeting),"object"==typeof d&&(b.updatedTargeting=d,e=b.utils.mergeObjects(e,d)),b.utils.isLocalStorageAvailable()&&(a.localStorage.setItem("com.expedia.meso.targeting",JSON.stringify(e)),b.mergedTargeting=e),e},b.utils.isViewable=function(d){if("object"==typeof d&&null!==d){var e,f,g,h=d.getBoundingClientRect(),i=h.bottom-h.top,j=h.right-h.left,k=a.innerHeight||document.documentElement&&document.documentElement.clientHeight||0,l=a.innerWidth||document.documentElement&&document.documentElement.clientWidth||0,m=100,n=i*j,o=Math.min(h.bottom,k),p=Math.max(h.top,0),q=Math.min(h.right,l),r=Math.max(h.left,0);if(!b.configuration.refreshAdModel||b.configuration.refreshAdModel.minAdViewablePercentage===c||0===b.configuration.refreshAdModel.minAdViewablePercentage)return h.top+i<k&&h.bottom-i>0&&h.left+j<l&&h.right-j>0;if(0!==n&&(m=b.configuration.refreshAdModel.minAdViewablePercentage,e=Math.max(0,o-p),f=Math.max(0,q-r),g=e*f*100/n,g>=m))return!0}return!1},b.utils.getDomain=function(a){var b=a.indexOf("://");return b!==-1&&(a=a.split("://")[1]),a=a.split("/")[0],b=a.indexOf("@"),b!==-1&&(a=a.split("@")[1]),b=a.indexOf("["),0===b&&a.indexOf("]")!==-1?a.substr(1,a.indexOf("]")-1):(b=a.indexOf(":"),b!==-1&&(a=a.split(":")[0]),a)},b.utils.sameDomain=function(a,d){return a!==c&&d!==c&&b.utils.getDomain(a)===b.utils.getDomain(d)},b.utils.containsEmail=function(a){if(b.utils.emailRegex.test(a)===!0)return!0;var c="";try{c=decodeURIComponent(a)}catch(d){}return b.utils.emailRegex.test(c)},b.utils.emailDetected=function(){return b.utils.containsEmail(b.utils.getRequestUrl())?(b.logging&&"function"==typeof b.logging.logMessage&&b.logging.logMessage("Suppressed expads initialization due to email address in url"),!0):!!b.utils.containsEmail(b.utils.getReferrerUrl())&&(b.logging&&"function"==typeof b.logging.logMessage&&b.logging.logMessage("Suppressed expads initialization due to email address in referrer"),!0)},b.utils.getRequestUrl=function(){return a.location.href},b.utils.getReferrerUrl=function(){return document.referrer||""},b.utils.onScroll=function(){if(b.configuration!==c&&b.configuration.refreshAdModel!==c){var a=b.configuration.refreshAdModel,d=b.experiments.getExperimentByName(a.experimentName),e=a.minTimeAwayFromPage;d&&1===d.bucket&&e>0&&"function"==typeof b.ensureViewableAdsAreLoaded&&b.ensureViewableAdsAreLoaded()}},b.utils.defer=function(a,b){return function(){"function"==typeof a&&(b=b||0,setTimeout(a,b))}},b.utils.trim=function(a){return"function"!=typeof String.prototype.trim?a.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,""):a.trim()},b.utils.parseQueryParams=function(a){if("string"!=typeof a)return b.logging.logError(new Error("Cannot parse query string: "+typeof a+", "+a)),{};if(a=b.utils.trim(a),!a)return{};a=a.replace(/^\?/,"").replace(/\+/g," ");var d,e={};d=a.split("&");for(var f=0;f<d.length;f++){var g=d[f].split("="),h=g.shift(),i=g.length>0?g.join("="):c;h!==c&&(h=b.utils.trim(decodeURIComponent(h))),i!==c&&(i=b.utils.trim(decodeURIComponent(i))),h&&(e.hasOwnProperty(h)&&i?b.utils.isArray(e[h])?e[h].indexOf(i)===-1&&e[h].push(i):e[h]!==i&&(e[h]=[e[h],i]):e[h]=!i||i)}return e},b.utils.performance={},b.utils.performance.mark=function(c){try{"undefined"!=typeof a.performance&&"function"==typeof a.performance.mark&&a.performance.mark(c)}catch(d){b.logging.logError(d,["adAction=expads.utils.performance.mark"])}},b.utils.performance.clearMarks=function(c){try{"undefined"!=typeof a.performance&&"function"==typeof a.performance.clearMarks&&a.performance.clearMarks(c)}catch(d){b.logging.logError(d,["adAction=expads.utils.performance.clearMarks"])}},b.utils.performance.clearAndMark=function(a){b.utils.performance.clearMarks(a),b.utils.performance.mark(a)},b.utils.performance.measure=function(c,d,e){try{"undefined"!=typeof a.performance&&"function"==typeof a.performance.measure&&a.performance.measure(c,d,e)}catch(f){b.logging.logError(f,["adAction=expads.utils.performance.measure"])}},b.utils.performance.clearMeasures=function(c){try{"undefined"!=typeof a.performance&&"function"==typeof a.performance.clearMeasures&&a.performance.clearMeasures(c)}catch(d){b.logging.logError(d,["adAction=expads.utils.performance.clearMeasures"])}},b.utils.performance.clearAndMeasure=function(a,c,d){b.utils.performance.clearMeasures(a),b.utils.performance.measure(a,c,d)},b.utils.showParentDivForNonEmptyAdUnit=function(d,e){if(b.adScriptLoaded){var f=document.getElementById(d);f.className+=" hidden-before-load",a.googletag&&a.googletag.apiReady&&a.googletag.pubads().addEventListener("slotOnload",function(a){if(a!==c&&a.slot!==c&&a.slot.getSlotId()!==c&&a.slot.getSlotId().getDomId()!==c&&null!==a.slot.getResponseInformation()){var b=document.getElementById(a.slot.getSlotId().getDomId());if(null!==b&&b.id.indexOf(e)!==-1){var f=document.getElementById(d);f.style.display="block"}}})}}}(window,window.expads=window.expads||{}),function(a,b){"use strict";var c=function(a){this.id=a,this.handlers=[]},d=function(b){a.events[b]=new c(b)};c.prototype.attachHandler=function(a){this.handlers.push(a)},c.prototype.fire=function(c){for(var d=0;d<this.handlers.length;d++)if("function"==typeof this.handlers[d])try{c!==b?this.handlers[d](c):this.handlers[d]()}catch(e){a.logging.logError(e,["adAction=ExpadsEvent.fire"])}},a.events=a.events||{},d("preInitialize"),d("postInitialize"),d("preRefresh"),d("postRefresh"),d("preEnsureVisibleAdsAreLoaded"),d("postEnsureVisibleAdsAreLoaded"),d("slotOnloadGoogleTagEvent"),d("postMarqueeCallSuccess")}(window.expads=window.expads||{}),function(a,b,c){"use strict";b.external=b.external||{},b.external.addEventListener=function(a){b.events.slotOnloadGoogleTagEvent.attachHandler(a)}}(window,window.expads=window.expads||{}),function(a,b,c){"use strict";function d(a,b,c){this.id=a,this.bucket=b,this.exposureLogged=c||!1}function e(){if(!o)try{k&&k.experiments&&(i(k.experiments),o=!0)}catch(a){b.logging.logError(a,["adAction=initializeExperimentsFromPageConfiguration"])}}function f(a){return j[a]}function g(a){return j.hasOwnProperty(a)}function h(){j={},o=!1}function i(a){if("object"==typeof a){var c,e,f;for(c in a)a.hasOwnProperty(c)&&(j.hasOwnProperty(c)&&b.logging.logError("Duplicate experiment merged into expads experiments"["experimentName="+c]),e=a[c],"object"==typeof e?(f=new d(e.id,e.bucket,e.exposureLogged),j[c]=f):b.logging.logMessage("experiment configuration not set up correctly",["configurationKey="+c]))}}var j={},k=b.configuration||{},l=k.tpid,m=k.eapid,n=k.guid,o=!1;d.prototype.bucketUser=function(d){var e=this;try{if(e.bucket!==c)"function"==typeof d&&d(e);else{var f={};f.id=e.id,f.eapid=m,f.tpid=l,f.guid=n,f.callback=function(a){e.bucket=a.value,"function"==typeof d&&d(e)},a.dctk&&a.dctk.evaluateExperiment(f)}}catch(g){b.logging.logError(g,["adAction=bucketUser","experimentId="+this.id])}},d.prototype.exposureLog=function(d){var e=this;if(e.exposureLogged===!1)try{"function"==typeof require&&require(["dctk/dctk"],function(f){if(a.dctk&&"function"==typeof a.dctk.evaluateExperimentAndLog){var g={};g.id=e.id,f.omtr&&f.omtr.pageName?g.pageName=f.omtr.pageName:b.adtoolkit&&b.adtoolkit.data&&b.adtoolkit.data.adcontext&&(g.pageName=b.adtoolkit.data.adcontext.pageName),g.eapid=m,g.tpid=l,g.guid=n,g.callback=function(a){a.error===c&&(e.exposureLogged=!0,e.bucket=e.bucket||a.value),"function"==typeof d&&d(e)},a.dctk.evaluateExperimentAndLog(g)}})}catch(f){b.logging.logError(f,["adAction=exposureLogUser","experimentId="+this.id])}else"function"==typeof d&&d(e)},b.events.preInitialize.attachHandler(function(){e()}),b.experiments=b.experiments||{},b.experiments.getExperimentByName=f,b.experiments.hasExperiment=g,b.experiments.addExperiments=i,b.experiments.initializeExperimentsFromPageConfiguration=e,b.experiments.clearExperiments=h}(window,window.expads=window.expads||{}),function(a,b,c){"use strict";b.events.postInitialize.attachHandler(function(){if(b.configuration!==c&&b.configuration.experiments!==c&&b.configuration.refreshAdModel!==c){var d,e,f,g=b.configuration.refreshAdModel,h=g.minTimeAwayFromPage,i=g.minTimeBeforeRefresh,j=b.experiments.getExperimentByName(g.experimentName),k=function(a,b){a&&"function"==typeof a.exposureLog&&(a.exposureLog(),1===a.bucket&&b!==c&&"function"==typeof b&&b())},l=function(){var a,d;for(a in b.slots)if(b.slots.hasOwnProperty(a)&&(d=b.slots[a],"object"==typeof d&&(d.refreshLimit===c||d.refreshLimit>0)))return!0;return!1},m=function(){if(l()===!0&&a.isStaleModeEnabled!==!0){e=new Date;try{d&&e-d>=1e3*h&&(f!==c&&clearTimeout(f),h>0&&(0===i?k(j,b.refreshAdsOnFocus):f=setTimeout(function(){k(j,b.refreshAdsOnFocus)},1e3*i)),i>0&&(f=setTimeout(function(){k(j,b.refreshAdsOnFocus)},1e3*i)))}catch(g){b.logging.logError(g,["adAction=initializeOnPageFocusRefresh"])}}},n=function(){d=new Date,i>0&&f!==c&&clearTimeout(f)},o=function(){try{i>0&&(f!==c&&clearTimeout(f),f=setTimeout(function(){k(j,b.refreshAdsOnFocus)},1e3*i))}catch(a){b.logging.logError(a,["adAction=initializeOnPageLoadRefresh"])}};g.pageFocusRequired&&(a.addEventListener?a.addEventListener("blur",n,!1):a.attachEvent&&a.attachEvent("onblur",n),a.addEventListener?a.addEventListener("focus",m,!1):a.attachEvent&&a.attachEvent("onfocus",m)),i>0&&(a.addEventListener?a.addEventListener("load",o,!1):a.attachEvent&&a.attachEvent("onload",o))}})}(window,window.expads=window.expads||{}),function(a,b){"use strict";a.Logger=function(){},a.Logger.prototype.logMessage=function(a,b){},a.Logger.prototype.logError=function(a,b){},a.Logger.prototype.logTrxEvent=function(){},a.Logger.prototype.name=function(){},a.loggers=a.loggers||[],a.logging=a.logging||{},a.logging.registerLogger=function(b){a.loggers.push(b)},a.logging.logMessage=function(c,d){if(c!==b)for(var e=0;e<a.loggers.length;e++)a.loggers[e].logMessage(c,d)},a.logging.logError=function(c,d){if(c!==b)for(var e=0;e<a.loggers.length;e++)a.loggers[e].logError(c,d)},a.logging.logTrxEvent=function(c,d){if(c!==b)for(var e=0;e<a.loggers.length;e++){var f=a.loggers[e];f.hasOwnProperty("logTrxEvent")&&"function"==typeof f.logTrxEvent&&f.logTrxEvent(c,d)}}}(window.expads=window.expads||{}),function(a,b,c){"use strict";if(a!==c){var d=new b.Logger;d.name=function(){return"Console logger"},d.logMessage=function(b,d){d!==c?a.log(b,d):a.log(b)},d.logError=function(b,d){d!==c?a.error(b,d):a.error(b)},b.logging.registerLogger(d)}}(window.console,window.expads=window.expads||{}),function(a,b,c,d){"use strict";b.configuration=b.configuration||{};var e="expads",f=!1,g=!1,h=[],i=[],j=[],k=function(){return"dctk logger"},l=function(a){var b=Math.floor(Math.random()*Math.pow(10,13));return a+=a.indexOf("?")>-1?"&_="+b:"?_="+b},m=function(){if(f){var a;for(a=0;a<h.length;a++)q(h[a].message,h[a].additionalParams);for(h=[],a=0;a<i.length;a++)p(i[a].error,i[a].additionalParams);for(i=[],a=0;a<j.length;a++)r(j[a].message,j[a].additionalParams);j=[]}},n=function(){if(b.configuration.forceDctkLoggingOn===!0||a.location.search.indexOf("adsClientLoggingEnabled=true")!==-1)return!0;if(b.configuration.loggingEnabled===!1)return!1;var c=5,d=1,e=Math.floor(Math.random()*(c-d+1))+d;return e===d},o=function(){if(c.logging!==d&&"function"==typeof c.logging.logMessage&&"function"==typeof c.logging.logError)f=!0,m();else if(b.configuration.dctkClientLoggingURL!==d&&b.configuration.dctkClientLoggingURL.length>0){g=!0;try{b.utils.ajax({url:l(b.configuration.dctkClientLoggingURL),done:t,fail:s,dataType:"text"})}catch(a){g=!1,b.logging.logError(a,["adAction=loadDctkIfNotAlreadyLoaded","dctkClientLoggingURL="+b.configuration.dctkClientLoggingURL])}}},p=function(a,b){if(f){var d=c.logging.pageName;c.logging.pageName+="_ads";try{c.logging.logError(e,a,b)}finally{c.logging.pageName=d}}else g&&i.push({error:a,additionalParams:b})},q=function(a,b){var d,i=["message="+a];for(d in b)b.hasOwnProperty(d)&&i.push(b[d]);if(f){var j=c.logging.pageName;c.logging.pageName+="_ads";try{c.logging.logMessage(e,i)}finally{c.logging.pageName=j}}else g&&h.push({message:a,additionalParams:b})},r=function(a,b){if(f){var d=c.logging.pageName;c.logging.pageName+="_ads";try{c.logging.logTrxEvent(e,b)}finally{c.logging.pageName=d}}else g&&j.push({message:a,additionalParams:b})},s=function(){g=!1,b.logging.logMessage("Failed to load the remote DCTK file",["dctkClientLoggingURL="+b.configuration.dctkClientLoggingURL])},t=function(c){g=!1,u(),a.dctk!==d&&a.dctk.logging!==d||(a.dctk=a.dctk||{},a.dctk.logging={pageStartTime:(new Date).getTime(),pageName:b.configuration.pageName,guid:b.configuration.guid},a.eval(c),u()),m()},u=function(){a.dctk!==d&&a.dctk.logging!==d&&"function"==typeof a.dctk.logging.logMessage&&"function"==typeof a.dctk.logging.logError&&(c=a.dctk,f=!0)};if(n()){b.events.preInitialize.attachHandler(o);var v=new b.Logger;v.logMessage=q,v.logError=p,v.logTrxEvent=r,v.name=k,b.logging.registerLogger(v)}}(window,window.expads=window.expads||{},window.dctk||{}),function(a,b,c){"use strict";var d=function(b){function c(c){var d="kx"+b+"_"+c,e=function(){try{return a.localStorage}catch(b){return null}}();if(e)return e[d]||"";if(navigator.cookieEnabled){var f=document.cookie.match(d+"=([^;]*)");return f&&unescape(f[1])||""}return""}return a.Krux||(a.Krux=function(){Krux.q=[],Krux.q.push(arguments)}),Krux.user=c("user"),Krux.segments=c("segs")?c("segs").split(","):[],Krux};a.expads=a.expads||{},a.expads.krux=a.expads.krux||{},a.expads.krux.getKrux=d}(window,window.expads=window.expads||{}),function(a,b){"use strict";a.extensions=a.extensions||{},a.callbacks=a.callbacks||{}}(window.expads=window.expads||{}),function(a,b){"use strict";var c="TOP-CENTER",d="TOP-RIGHT",e="CENTER-LEFT",f="CENTER-CENTER",g="CENTER-RIGHT",h="BOTTOM-LEFT",i="BOTTOM-CENTER",j="BOTTOM-RIGHT",k=function(b,k){var l=k.getElementById(b.priceContainer);if(b.eventData.priceAvailable===!0){var m=b.availableMessage+b.eventData.currencyType+b.eventData.price;l.appendChild(k.createTextNode(m))}else l.appendChild(k.createTextNode(b.unavailableMessage));var n=b.adWidth,o=b.adHeight,p=l.offsetWidth,q=l.offsetHeight,r=0,s=0;p<=n&&q<=o?(b.position===c?r=(n-p)/2:b.position===d?r=n-p:b.position===e?s=(o-q)/2:b.position===f?(r=(n-p)/2,s=(o-q)/2):b.position===g?(r=n-p,s=(o-q)/2):b.position===h?s=o-q:b.position===i?(r=(n-p)/2,s=o-q):b.position===j?(r=n-p,s=o-q):(r=0,s=0),l.style.marginLeft=r,l.style.marginTop=s,l.style.visibility="visible"):a.logging.logError("The dynamic price container width/height is greater than the ad unit size.")},l=function(a,b){b.getElementsByTagName("iframe")[0].contentWindow.postMessage(a.eventData,"*")};a.callbacks.dynamicPricing=a.callbacks.dynamicPricing||{},a.callbacks.dynamicPricing.dfpCallback=k,a.callbacks.dynamicPricing.sizmekCallback=l}(window.expads=window.expads||{}),function(a,b,c){"use strict";b.events.preInitialize.attachHandler(function(){b.mergedTargeting=b.utils.isLocalStorageAvailable()?JSON.parse(a.localStorage.getItem("com.expedia.meso.targeting")):{}})}(window,window.expads=window.expads||{}),function(a,b){"use strict";var c="-",d=function(b,d,e,f,g){if(""===b||""===d||""===f||""===g)return a.logging.logError("Error: Flight search API cannot be queried if airline code, start date, departure airport or arrival airport are missing."),null;var h=a.utils.formatDateToISOSpecification(d.split(c)[2],d.split(c)[0],d.split(c)[1]),i="PRICE",j="1",k="/api/flight/search?",l="departureAirport="+encodeURIComponent(f.trim())+"&arrivalAirport="+encodeURIComponent(g.trim())+"&departureDate="+encodeURIComponent(h.trim())+"&airlinePreference="+encodeURIComponent(b.trim())+"&sortType="+encodeURIComponent(i.trim())+"&maxOfferCount="+encodeURIComponent(j.trim());if(""!==e){var m=a.utils.formatDateToISOSpecification(e.split(c)[2],e.split(c)[0],e.split(c)[1]);l+="&returnDate="+encodeURIComponent(m.trim())}return k+l},e=function(){a.logging.logError("Error: Flight search API call to fetch the dynamic pricing data failed.")},f=function(a,c,d){var f=JSON.parse(a),g=f.offers,h=f.searchCities;if(g!==b){if(0===g.length)d.eventData.priceAvailable=!1;else{for(var i in h)h.hasOwnProperty(i)&&(d.departureAirport===h[i].code&&(d.eventData.departureCity=h[i].city),d.arrivalAirport===h[i].code&&(d.eventData.arrivalCity=h[i].city));d.eventData.priceAvailable=!0,d.eventData.price=g[0].totalFarePrice.formattedPrice,d.eventData.currencyType=""}d.dynamicPricingDisplayCallback(d,c)}else e()},g=function(b,c,d){var g=(new Date).getTime(),h="Flight Search API call took ";a.utils.ajax({url:b,done:function(b){return a.utils.logTimeTakenToCompleteAPICall(g,(new Date).getTime(),h),f(b,c,d)},fail:function(){return a.utils.logTimeTakenToCompleteAPICall(g,(new Date).getTime(),h),e()}})},h=function(b,c){try{var e=d(c.queryParams.airlineCode,c.queryParams.startDate,c.queryParams.endDate,c.queryParams.departureAirport,c.queryParams.arrivalAirport);null!==e&&g(e,b,c.displayParams)}catch(f){a.logging.logError("Extension: AirlinesDynamicPriceExtension, "+f)}};a.extensions.airlinesDynamicPricing=a.extensions.airlinesDynamicPricing||{},a.extensions.airlinesDynamicPricing.retrieveAndDisplayPrice=h}(window.expads=window.expads||{}),function(a,b){"use strict";var c="-",d="/m/api/hotel/info",e="/ads/priceHotel",f="/m/api/hotel/search",g=function(b,d,e,g){if(""===e||""===g||""===b||""===d)return a.logging.logError("Error: Hotel search API cannot be queried if brand id, destination, start date or end date are missing."),null;var h=a.utils.formatDateToISOSpecification(e.split(c)[2],e.split(c)[0],e.split(c)[1]),i=a.utils.formatDateToISOSpecification(g.split(c)[2],g.split(c)[0],g.split(c)[1]),j="1",k="BASE_PRICE_ONLY",l="-1",m=f+"?",n="city="+encodeURIComponent(d.trim())+"&brandNameId="+encodeURIComponent(b.toString().trim())+"&priceType="+encodeURIComponent(k.trim())+"&checkInDate="+encodeURIComponent(h.trim())+"&checkOutDate="+encodeURIComponent(i.trim())+"&room="+encodeURIComponent(j.trim())+"&resultsPerPage="+encodeURIComponent(l.trim());return m+n},h=function(b,d,f){if(""===b)return a.logging.logError("Error: Hotel search API cannot be queried if hotelId is missing."),null;var g=""===d?"":a.utils.formatDateToISOSpecification(d.split(c)[2],d.split(c)[0],d.split(c)[1]),h=""===f?"":a.utils.formatDateToISOSpecification(f.split(c)[2],f.split(c)[0],f.split(c)[1]),i=e+"?",j="hotelId="+encodeURIComponent(b)+(""===g?"":"&start="+encodeURIComponent(g.trim()))+(""===h?"":"&end="+encodeURIComponent(h.trim()));return i+j},i=function(){a.logging.logError("Error: Hotel search API call to fetch the dynamic pricing data failed.")},j=function(c,d,e){var f=JSON.parse(c),g=f.hotelList;if(g!==b&&g.length>0){var h=g[0].rateCurrencySymbol,j=[];for(var k in g)g.hasOwnProperty(k)&&g[k].isHotelAvailable===!0&&j.push(parseInt(g[k].lowRateInfo.priceToShowUsers));j.length>0?(j.sort(function(a,b){return a-b}),e.eventData.price=j[0],e.eventData.currencyType=h,e.eventData.priceAvailable=!0):e.eventData.priceAvailable=!1,e.dynamicPricingDisplayCallback(e,d)}else{var l=f.errors;if(l!==b&&l.length>0){var m="Error: Hotel search API call to fetch the dynamic pricing data returned with the following error(s):\n";for(var n in l)if(l.hasOwnProperty(n)){var o=l[n].errorInfo.field,p="Summary: "+l[n].errorInfo.summary;m+=o!==b?p+", Field: "+o+"\n":p+"\n"}a.logging.logError(m)}else i()}},k=function(a,b,c){var d=JSON.parse(a);d&&d.price&&d.currencySymbol?(c.eventData.price=d.price,c.eventData.currencyType=d.currencySymbol,c.eventData.priceAvailable=!0):c.eventData.priceAvailable=!1,c.dynamicPricingDisplayCallback(c,b)},l=function(b,c,d,e){var f=(new Date).getTime(),g="Hotel Search API call took ";a.utils.ajax({url:b,done:function(b){return a.utils.logTimeTakenToCompleteAPICall(f,(new Date).getTime(),g),e?j(b,c,d):k(b,c,d)},fail:function(){return a.utils.logTimeTakenToCompleteAPICall(f,(new Date).getTime(),g),i()}})},m=function(b,c){try{var d=h(c.queryParams.hotelId,c.queryParams.startDate,c.queryParams.endDate);null!==d&&l(d,b,c.displayParams,!1)}catch(e){a.logging.logError("Extension: HotelsDynamicPriceExtension, Type: By Hotel ID, "+e)}},n=function(b,c){try{var d=g(c.queryParams.brandId,c.queryParams.destinationCode,c.queryParams.startDate,c.queryParams.endDate);null!==d&&l(d,b,c.displayParams,!0)}catch(e){a.logging.logError("Extension: HotelsDynamicPriceExtension, Type: By Brand, "+e)}},o={_buildUrl:function(a,b){return a+this._buildQuery(b)},_buildQuery:function(a){for(var b="?",c=[],d=Object.keys(a),e=0,f=d.length;e<f;e++)c.push(d[e]+"="+encodeURIComponent(a[d[e]]));return b+c.join("&")},get:function(b,c,e){var f=this._buildUrl(d,b.requestParams),g=b.apiName+" call took ",h=(new Date).getTime();a.utils.ajax({url:f,dataType:"json",done:function(b){a.utils.logTimeTakenToCompleteAPICall(h,(new Date).getTime(),g),b&&b.percentRecommended?c(b.percentRecommended):e(b)},fail:function(b){a.utils.logTimeTakenToCompleteAPICall(h,(new Date).getTime(),g),p(),p!==e&&e(b)}})}},p=function(){a.logging.logError("Error: Hotel Info API call to fetch the dynamic review data failed.")},q=function(b,c){try{c.apiName=c.apiName||"Hotel Info API",o.get(c,c.displayCallback,c.errorCallback||p)}catch(d){a.logging.logError("Extension: HotelsDynamicReviewExtension  "+d)}};a.extensions.hotelsDynamicPricing=a.extensions.hotelsDynamicPricing||{},a.extensions.hotelsDynamicReview=a.extensions.hotelsDynamicReview||{},a.extensions.hotelsDynamicPricing.retrieveAndDisplayPriceById=m,a.extensions.hotelsDynamicPricing.retrieveAndDisplayPriceByBrand=n,a.extensions.hotelsDynamicReview.fetch=q}(window.expads=window.expads||{}),function(a,b,c,d){"use strict";var e,f,g,h,i=function(b,c,i,j){var k=c.offset().top+c.height(),l=i.offset().top,m=b.height(),n=b.parent(),o=$(a).scrollTop();if(o>k){var p=o+m;if(p<=l)e===d&&(e=b.css("marginLeft"),f=b.css("marginRight")),b.css({position:"fixed",top:"0px","margin-top":"0px","margin-left":e,"margin-right":f});else{var q;j?(g===d&&(g=parseFloat(n.css("padding-top"))+parseFloat(n.css("padding-bottom"))),h===d&&(h=n.offset().top),q=(l-h-g-m).toString()+"px"):q=(l-k-m).toString()+"px",b.css({position:"relative",top:"auto","margin-top":q,"margin-left":e,"margin-right":f})}}else b.css({position:"relative",top:"auto","margin-top":"0px","margin-left":e,"margin-right":f})};c.extensions.clingyAds={init:function(b,d,e,f,g){require(["uitk","jquery"],function(d,h){var j=h(b),k=h(e),l=h(f),m=j.siblings("div").last();k.length<=0&&(k=m),j.length>0&&k.length>0&&l.length>0?(d.subscribe("debounced.resize",function(){i(j,k,l,g)}),h(a).scroll(d.utils.throttle(function(){i(j,k,l,g)},150)),i(j,k,l,g)):c.logging.logMessage("Element reference parameters in expads.extensions.clingyAds.init could not be resolved.")})}}}(window,document,window.expads=window.expads||{}),function(a,b){"use strict";function c(b,c){this.startTime=(new Date).getTime(),this.type=b,this.requested={},this.recorded=!1,this.recordingTimeout=null;var d;for(d in c)c.hasOwnProperty(d)&&(this.requested[c[d]]={loaded:!1});a.analytics.adCalls.push(this)}var d=1e3;c.prototype.slotRenderedCallback=function(a,b){if(a&&a.slot&&"function"==typeof a.slot.getSlotId&&"function"==typeof a.slot.getSlotId().getDomId){var c=a.slot.getSlotId().getDomId(),e=this.requested[c];e&&!e.loaded&&(e.loaded=!0,e.isEmpty=a.isEmpty,e.creativeId=a.creativeId,e.lineItemId=a.lineItemId,e.adUnitPath=a.slot.getAdUnitPath(),e.timeLoaded=(new Date).getTime(),e.loadTime=this.getLoadTime(c),!this.recorded&&b&&(clearTimeout(this.recordingTimeout),this.numAdsOutstanding()>0?this.recordingTimeout=setTimeout(this.record,d):this.record()))}},c.prototype.getLoadTime=function(a){if(this.requested[a])return this.requested[a].timeLoaded-this.startTime},c.prototype.numAdsOutstanding=function(){return this.numAdsRequested()-this.numAdsLoaded()},c.prototype.numAdsLoaded=function(){var a,b,c=0;for(a in this.requested)this.requested.hasOwnProperty(a)&&(b=this.requested[a],b.loaded&&c++);return c},c.prototype.numAdsRequested=function(){var a,b=0;for(a in this.requested)this.requested.hasOwnProperty(a)&&b++;return b},c.prototype.averageLatencyPerAd=function(){var a,b,c=0,d=0;for(a in this.requested)this.requested.hasOwnProperty(a)&&(b=this.requested[a],b.loaded&&(d++,c+=b.loadTime));return c/d},c.prototype.averageNavStartToSlotRenderEnded=function(){if(f()){var a,b,c=0,d=0;for(a in this.requested)this.requested.hasOwnProperty(a)&&(b=this.requested[a],b.loaded&&(d++,c+=b.timeLoaded-window.performance.timing.navigationStart));
return 0===d?null:c/d}return null},c.prototype.record=function(){this.recorded===!1&&(this.logAdCall(),this.recorded=!0,this.postToCollectorWeb())},c.prototype.logAdCall=function(){var c,d=[],g=a.analytics.expadsReady,h=a.analytics.googleTagReady,i=a.analytics.adsRequested,j=a.analytics.simplifiedAdsRequested,k=a.analytics.simplifiedAdsReturned,l=e(this.requested);if(d.push("numberOfAdsRequested="+encodeURIComponent(this.numAdsRequested())),d.push("numberOfAdsReturned="+encodeURIComponent(this.numAdsLoaded())),d.push("averageLatencyPerAd="+encodeURIComponent(this.averageLatencyPerAd())),d.push("adCallNumber="+encodeURIComponent(a.analytics.adCalls.indexOf(this)+1)),b!==g&&f()&&(d.push("navStartToExpadsReady="+encodeURIComponent(g-window.performance.timing.navigationStart)),b!==h&&d.push("expadsReadyToGoogleTagReady="+encodeURIComponent(h-g))),b!==h&&f()&&(d.push("navStartToGoogleTagReady="+encodeURIComponent(h-window.performance.timing.navigationStart)),b!==g&&d.push("googleTagReadyToExpadsReady="+encodeURIComponent(g-h))),b!==i&&(b!==h&&d.push("googleTagReadyToAdsRequested="+encodeURIComponent(i-h)),b!==g&&d.push("expadsReadyToAdsRequested="+encodeURIComponent(i-g)),f()&&d.push("navStartToAdsRequested="+encodeURIComponent(i-window.performance.timing.navigationStart))),b!==l&&b!==i&&d.push("adsRequestedToAdsRendered="+encodeURIComponent(l-i)),c=this.averageNavStartToSlotRenderEnded(),b!==c&&null!==c&&d.push("averageNavStartToSlotRenderEnded="+encodeURIComponent(c)),b!==j&&(f()&&d.push("navStartToMarqueeRequested="+encodeURIComponent(j-window.performance.timing.navigationStart)),b!==g&&d.push("expadsReadyToMarqueeRequested="+encodeURIComponent(j-g))),b!==k&&(f()&&d.push("navStartToMarqueeReturned="+encodeURIComponent(k-window.performance.timing.navigationStart)),b!==j&&d.push("marqueeRequestedToMarqueeReturned="+encodeURIComponent(k-j))),a.logging.logTrxEvent((new Date).getTime()-this.startTime,d),sessionStorage&&"function"==typeof sessionStorage.getItem&&"function"==typeof sessionStorage.removeItem)try{var m=sessionStorage.getItem("renderedAds");sessionStorage.removeItem("renderedAds");var n=a.experiments.getExperimentByName("EnableAdsPerfDataCollection");m&&a.configuration&&n&&n.bucket&&1===n.bucket&&a.configuration.collectorWebURL&&a.utils.ajax({type:"POST",url:a.configuration.collectorWebURL,contentType:"application/json",data:m,fail:function(){a.logging.logError("Failed to post rendered ads data to collector web",["adAction=postToCollectorWeb"])}})}catch(o){a.logging.logMessage("expads.analytics.displayAdCall.logAdCall unable to log creative performance metrics")}},c.prototype.postToCollectorWeb=function(){if(a.configuration&&a.configuration.postToCollectorWeb===!0){var c,d,e={};try{e.guid=a.configuration.guid,e.activityId="object"==typeof a.targeting?a.targeting.activity:b,e.timestamp=this.startTime,e.impressions=[];for(c in this.requested)this.requested.hasOwnProperty(c)&&(d=this.requested[c],e.impressions.push({adUnitPath:d.adUnitPath,creativeId:d.creativeId,lineItemId:d.lineItemId}));a.utils.ajax({type:"POST",url:"/cl/data/ADS_impression.json?stream=true&persist=true",contentType:"application/json",data:JSON.stringify(e),fail:function(){a.logging.logError("Failed to post impression data to collector web",["adAction=postToCollectorWeb"])}})}catch(f){a.logging.logError(f,["adAction=postToCollectorWeb"])}}};var e=function(a){var c,d,e;for(d in a)a.hasOwnProperty(d)&&(c=a[d],c.loaded&&(e===b||c.timeLoaded>e)&&(e=c.timeLoaded));return e},f=function(){return window.performance&&window.performance.timing&&window.performance.timing.navigationStart};a.analytics=a.analytics||{},a.analytics.AdCall=c,a.analytics.adCalls=a.analytics.adCalls||[]}(window.expads=window.expads||{}),function(a,b){"use strict";var c=function(c){var d=c.adconfig||{},e=c.onerror,f=new Date,g=c.onload,h=c.name,i=function(){var b,e,i="function"==typeof g&&g();if(void 0!==h&&c.document.body.innerHTML.length>0){e={},e.name=h.replace(/^google_ads_iframe_/,"").replace(/_\d+$/,""),e.requestTime=f;for(var j in d)d.hasOwnProperty(j)&&(e[j]=d[j]);var k,l;if(c&&c.performance&&"function"==typeof c.performance.getEntriesByType){k=c.performance.getEntriesByType("resource"),e.resourceList=k;for(var m=0;m<k.length;m++)"img"==k[m].initiatorType&&(l=k[m].responseEnd-k[m].startTime,(void 0===b||l>b)&&(b=k[m].responseEnd-k[m].startTime))}else b=(new Date).getTime()-f.getTime();e.elapsedTime=b,a.expads.renderedAds[e.name]=e}return i},j=function(c,f,g){var i=a.expads.renderedAds[h]||{},j=[];return i.errorMsg=c,i.errorLine=g,i.errorUrl=f,i.error=!0,a.expads.renderedAds[h]=i,j.push("onErrorMsg="+encodeURIComponent(c)),j.push("onErrorUrl="+encodeURIComponent(f)),j.push("orderId="+encodeURIComponent(d.orderId||"")),j.push("lineItemId="+encodeURIComponent(d.lineItemId||"")),j.push("creativeId="+encodeURIComponent(d.creativeId||"")),j.push("adUnitId="+encodeURIComponent(d.adUnitId||"")),j.push("onErrorLine="+encodeURIComponent(g)),b.logging.logMessage("ExpAds",j),"function"==typeof e&&e(c,f,g),!1};c.onerror=j,c.onload=i};b.analytics=b.analytics||{},b.analytics.creativeWindowCallback=c}(window,window.expads=window.expads||{}),function(a){"use strict";function b(a){var b=a.adUnit,c=b.split(/\//),d=c[c.length-1];return d}function c(a,b){var c=a.getElementsByClassName("flex-title")[0];c&&b&&b.headline&&(c.innerText=b.headline)}function d(a,b){var c=a.getElementsByClassName("secondary")[0];c&&b&&b.description&&(c.innerText=b.description)}function e(b,c){var d=b.getElementsByClassName("image")[0],e=document.createElement("img");if(d&&c&&c.image&&(e.src=c.image,d.appendChild(e),d.classList.remove("no-image"),c.thirdPartyImpressionTrackingURL)){var f=document.createElement("img");f.src=a.utils.getCacheProofUrl(c.thirdPartyImpressionTrackingURL),d.appendChild(f)}}function f(a,b){var c=a.getElementsByClassName("flex-link")[0];c&&b&&b.clickTrackingURL&&(c.href=b.clickTrackingURL)}function g(a){try{a.classList.remove("div-hidden"),a.firstChild.classList.remove("div-hidden")}catch(b){}}function h(a){var b=window.expads.configuration.displayAdSlots||[];if(b.length>0)for(var c=0;c<b.length;c++){var d=b[c];for(var e in d)if(d.hasOwnProperty(e)&&d.id===a)return d}}var i=function(a,b){if(a&&b){var h=b.templateId;if(h){var i=document.getElementById(h);if(!i)return;c(i,a),d(i,a),e(i,a),f(i,a),g(i)}}};window.addEventListener("message",function(a){var c=a.data;c.type;if(c&&"ad-data"===c.type&&c.adUnit){var d=b(c),e=h(d);e&&i(c,e)}})}(window.expads=window.expads||{}),function(a,b){"use strict";var c=function(c){var d,e,f,g=c.adconfig||{},h=c.startTime,i=c.name,j=c.timeToLoadCreative;if(void 0!==i){d={},d.name=i,d.requestTime=h,d.timeToLoadCreative=j;for(var k in g)g.hasOwnProperty(k)&&(d[k]=g[k]);try{var l,m=JSON.parse(c.resourceList);if(m&&m.length>0){d.resourceList=m;for(var n=0;n<m.length;n++)"img"==m[n].initiatorType&&(l=m[n].responseEnd-m[n].startTime,(void 0===e||l>e)&&(e=m[n].responseEnd-m[n].startTime))}else m&&(d.resourceList=m),e=(new Date).getTime()-h.getTime()}catch(o){e=(new Date).getTime()-h.getTime(),b.logging.logMessage("Unable to parse stringified resource list from HTML5 message. Frame name="+i)}if(d.elapsedTime=e,a.expads.renderedAds[d.name]=d,JSON&&"function"==typeof JSON.parse&&"function"==typeof JSON.stringify&&sessionStorage&&"function"==typeof sessionStorage.getItem&&"function"==typeof sessionStorage.setItem)try{f=sessionStorage.getItem("renderedAds")||"{}",f=JSON.parse(f),f[d.name]=d,sessionStorage.setItem("renderedAds",JSON.stringify(f))}catch(p){b.logging.logMessage("expads.analytics.processAdMetrics unable to store creative performance metrics in session storage")}}},d=function(c){var d=c.name,e=a.expads.renderedAds[d]||{},f=[],g=c.adconfig;e.errorMsg=c.errorMsg,e.errorLine=c.errorLine,e.errorUrl=c.errorUrl,e.error=!0,a.expads.renderedAds[d]=e,f.push("onErrorMsg="+encodeURIComponent(c.errorMsg)),f.push("onErrorUrl="+encodeURIComponent(c.errorUrl)),f.push("orderId="+encodeURIComponent(g.orderId||"")),f.push("lineItemId="+encodeURIComponent(g.lineItemId||"")),f.push("creativeId="+encodeURIComponent(g.creativeId||"")),f.push("adUnitId="+encodeURIComponent(g.adUnitId||"")),f.push("onErrorLine="+encodeURIComponent(c.errorLine)),b.logging.logMessage("ExpAds",f)};b.analytics=b.analytics||{},b.analytics.processAdMetrics=c,b.analytics.handleErrorMessage=d,window.addEventListener("message",function(a){var c=a.data,d=a.origin;c&&c.adconfig&&(d.indexOf("google")!=-1||d===window.location.origin)&&(c.error?b.analytics.handleErrorMessage(c):b.analytics.processAdMetrics(c))})}(window,window.expads=window.expads||{}),function(a,b){"use strict";function c(){return a.utils.emailDetected()}var d=a.adProducts=a.adProducts||[];a.configuration=a.configuration||{},a.renderedAds=a.renderedAds||{},a.initialize=function(b){if(c()!==!0){a.events.preInitialize.fire();var e,f;for(a.utils.mergeTargetingAndUpdateLocalStorage(b),e=0;e<d.length;e++)f=d[e].filterAdSlots(a.slots),a.utils.isEmptyObject(f)||d[e].initialize(f);a.events.postInitialize.fire()}},a.refresh=function(b,e){if(c()!==!0){a.events.preRefresh.fire(),a.renderedAds={};var f,g;for(a.utils.mergeTargetingAndUpdateLocalStorage(b),g=0;g<d.length;g++)f=d[g].filterAdSlots(a.slots),a.utils.isEmptyObject(f)||d[g].refresh(f,e);a.events.postRefresh.fire()}},a.ensureVisibleAdsAreLoaded=function(){if(c()!==!0){a.events.preEnsureVisibleAdsAreLoaded.fire();var b,e;for(b=0;b<d.length;b++)e=d[b].filterAdSlots(a.slots),a.utils.isEmptyObject(e)||d[b].ensureVisibleAdsAreLoaded(e);a.events.postEnsureVisibleAdsAreLoaded.fire()}},a.refreshAdsOnFocus=function(){if(c()!==!0){var b,e;for(b=0;b<d.length;b++)e=d[b].filterAdSlots(a.slots),a.utils.isEmptyObject(e)||d[b].refreshAdsOnFocus(e)}},a.ensureViewableAdsAreLoaded=function(){if(c()!==!0){var b,e;for(b=0;b<d.length;b++)e=d[b].filterAdSlots(a.slots),a.utils.isEmptyObject(e)||d[b].ensureViewableAdsAreLoaded(e)}},a.setAdProducts=function(b){d=a.adProducts=b},a.registerAdProduct=function(a){d.push(a)},a.utils.performance.clearAndMark("expedia.ads.library.ready"),a.analytics=a.analytics||{},b===a.analytics.expadsReady&&(a.analytics.expadsReady=(new Date).getTime())}(window.expads=window.expads||{}),function(a){"use strict";a.AdProduct=function(a){this.name=a},a.AdProduct.prototype.clear=function(){a.logging.logMessage("Call to unimplemented method clear for base AdProduct",["adProductName="+this.name])},a.AdProduct.prototype.ensureVisibleAdsAreLoaded=function(){a.logging.logMessage("Call to unimplemented method ensureVisibleAdsAreLoaded for base AdProduct",["adProductName="+this.name])},a.AdProduct.prototype.filterAdSlots=function(b){return a.logging.logMessage("Call to unimplemented method filterAdSlots for base AdProduct",["adProductName="+this.name,"slots="+b]),{}},a.AdProduct.prototype.initialize=function(b){a.logging.logMessage("Call to unimplemented method initialize for base AdProduct",["adProductName="+this.name,"slots="+b])},a.AdProduct.prototype.refresh=function(a){this.clear(),this.ensureVisibleAdsAreLoaded(a)},a.AdProduct.prototype.refreshAdsOnFocus=function(a){},a.AdProduct.prototype.ensureViewableAdsAreLoaded=function(a){}}(window.expads=window.expads||{}),function(a,b,c){"use strict";var d=!1,e=function(a){var b,d,e={};for(b in a)a.hasOwnProperty(b)&&(d=a[b],d!==c&&"adzerk"===b&&(e[b]=d));return e},f=function(a){var b=a.adzerk;b&&!d&&b.placements&&(b.renderers=b.renderers||{},g(b))},g=function(a){var c=h(a),d={type:"POST",url:"https://engine.adzerk.net/api/v2",dataType:"json",data:JSON.stringify(c),done:function(b){i(b,a)},fail:function(){b.logging.logMessage("Request call to Adzerk has failed - native ads would not serve as a result")}};try{b.utils.ajax(d)}catch(e){b.logging.logMessage("Request call to Adzerk has failed - native ads would not serve as a result")}},h=function(a){var c={placements:[]},d=a.networkId,e=a.siteId,f=a.placements||{};for(var g in f)if(f.hasOwnProperty(g)){var h={divName:f[g].id,adTypes:k(f[g].adTypes),networkId:d,siteId:e,properties:b.targeting},i=f[g];i.eventIds&&(h.eventIds=k(i.eventIds)),i.zoneIds&&(h.zoneIds=k(i.zoneIds)),i.campaignId&&(h.campaignId=i.campaignId),c.placements.push(h)}return c},i=function(a,b){if(a&&a.decisions){d=!0;var c=a.decisions;for(var e in c)c.hasOwnProperty(e)&&j(e,c[e],b)}},j=function(a,c,d){var e,f=d.placements;for(var g in f)if(f.hasOwnProperty(g)){var h=f[g];h.id===a&&(e=h.adTypes)}var i=b.configuration.adzerkRenderers;if(i&&e){var j=i[e];j&&"function"==typeof j.render&&i[e].render(a,c)}},k=function(a){for(var b=a.substring(1,a.length-1).split(","),c=0;c<b.length;c++)b[c]=parseInt(b[c],10);return b},l=function(){d=!1},m=function(a){l(),f(a)},n=function(a){f(a)},o=new b.AdProduct("AdzerkAds");o.initialize=f,o.clear=l,o.filterAdSlots=e,o.refresh=m,o.ensureVisibleAdsAreLoaded=n,o.requestCall=g,o.createRequest=h,o.renderPlacement=j,b.registerAdProduct(o)}(window.document,window.expads=window.expads||{}),function(a,b,c){"use strict";var d=function(c){var d,e,f,h;for(d in c)if(c.hasOwnProperty(d))try{e=a.getElementById(d),b.utils.isLoaded(e)||!b.utils.isVisible(e)&&!b.utils.isForceLoad(e)||(f=c[d],h=f.url+"location="+f.location+"&sublocation="+f.sublocation+"&placement="+f.placement,g(e,h))}catch(i){b.logging.logError(i,["adAction=afcAds.ensureVisibleAdsAreLoaded","adId="+d])}},e=function(c){for(var e in c)if(c.hasOwnProperty(e)){var f=a.getElementById(e);b.utils.isLoaded(f)&&h(f)}d(c)},f=function(a){var b,d,e={};if(a!==c)for(b in a)a.hasOwnProperty(b)&&(d=a[b],d!==c&&d.url!==c&&d.location!==c&&d.sublocation!==c&&d.placement!==c&&(e[b]=d));return e},g=function(a,b){var c="true"===a.getAttribute("data-resize"),d='<iframe scrolling="no" frameBorder="0" marginHeight="0" marginWidth="0" allowTransparency="true" style="border:none; overflow:hidden; width:'+a.style.width+"; height:"+a.style.height+';" src="'+b+'"';c&&(d+=" onload=\"expads.utils.resize('"+a.id+"');\""),d+="></iframe>",a.innerHTML=d,a.setAttribute("data-loaded","true")},h=function(a){a!==c&&a.removeAttribute("data-loaded")},i=new b.AdProduct("AfcAds");i.initialize=e,i.clear=h,i.ensureVisibleAdsAreLoaded=d,i.filterAdSlots=f,i.refresh=e,b.registerAdProduct(i)}(window.document,window.expads=window.expads||{}),function(a,b,c){"use strict";b.adSenseContainers=b.adSenseContainers||{};var d=function(){e()},e=function(){if("object"==typeof window.expAdsCsa&&window.expAdsCsa.shouldRefresh())for(var c in window.expads.adSenseContainers)if(window.expads.adSenseContainers.hasOwnProperty(c)){var d=a.getElementById(c);b.utils.isLoaded(d)&&f(d)}g()},f=function(a){a!==c&&a.removeAttribute("data-loaded")},g=function(){for(var c in b.adSenseContainers)try{var d=a.getElementById(c);if(!b.utils.isLoaded(d)&&(b.utils.isVisible(d)||b.utils.isForceLoad(d))){var e=window.expads.adSenseContainers[c];e(c),d.setAttribute("data-loaded","true")}}catch(f){b.logging.logError(f,["adAction=afsAds.ensureVisibleAdsAreLoaded"])}},h=function(){return b.adSenseContainers},i=new b.AdProduct("AfsAds");i.initialize=d,i.clear=f,i.ensureVisibleAdsAreLoaded=g,i.refresh=e,i.filterAdSlots=h,b.registerAdProduct(i)}(window.document,window.expads=window.expads||{}),function(a,b,c,d){"use strict";function e(a,b,c){this.id=a,this.config=b,this.googleSlot=c,this.viewed=!1,this.reloadOnFocus=!1}e.prototype.getContainer=function(){return a.getElementById(this.id)};var f=!1,g=!1,h=[],i=function(){var a,b,d=[];for(a=0;a<h.length;a++)b=h[a].getContainer(),E(h[a])&&(d.push(h[a].googleSlot),C(b)&&k(b));c&&c.apiReady&&(c.pubads().clear(d),c.pubads().updateCorrelator())},j=function(a){var d,e;for(d=0;d<a.length;d++)e=a[d].getContainer(),a[d].viewed=b.utils.isViewable(e)||!1,C(e)&&(k(e),c&&c.apiReady&&(c.pubads().clear(a[d].googleSlot),c.pubads().updateCorrelator()))},k=function(a){a!==d&&(a.removeAttribute("data-loaded"),a.style.display="")},l=function(a,c,d){try{if("object"==typeof c){var e,f,g,h,i,j,k,l,m,n,o=10,p=[];for(e in c)if(c.hasOwnProperty(e)&&(g=e.split("X"),b.utils.isArray(g)&&2===g.length)){n=[],h=g[0],i=g[1],f=[],f.push(parseInt(h,o)),f.push(parseInt(i,o)),j=[];for(k in c[e])c[e].hasOwnProperty(k)&&(l=c[e][k],m=[],m.push(parseInt(l.width,o)),m.push(parseInt(l.height,o)),j.push(m));b.utils.isArray(f)&&f.length>0&&b.utils.isArray(j)&&j.length>0&&(n.push(f),n.push(j),p.push(n))}p.length>0&&d.defineSizeMapping(p)}}catch(q){b.logging.logError(q,["adAction=defineSizeMapping","adId="+a])}},m=function(a){var b,d=[];for(b=0;b<a.length;b++)d.push(a[b].googleSlot);d.length>0&&c.destroySlots(d)},n=function(b){var f,g,i,j,k;if(b!==d&&c&&c.apiReady)for(f in b)b.hasOwnProperty(f)&&(g=b[f],g!==d&&g.path!==d&&g.width!==d&&g.height!==d&&p(a.getElementById(f))&&!g.defined&&(i=g.legacyId!==d?g.legacyId:f,k="fluid"===g.width||"fluid"===g.height?"fluid":[parseInt(g.width,10),parseInt(g.height,10)],j=c.defineSlot(g.path,k,i).addService(c.pubads()),g.collapseEmptyDiv&&j.setCollapseEmptyDiv(!0,!0),l(f,g.sizeMap,j),h.push(new e(i,g,j)),g.defined=!0))},o=function(b){var f,g,h,i,j,k=[];if(b!==d&&c&&c.apiReady)for(f in b)b.hasOwnProperty(f)&&(g=b[f],g!==d&&g.path!==d&&g.width!==d&&g.height!==d&&p(a.getElementById(f))&&(h=g.legacyId!==d?g.legacyId:f,j="fluid"===g.width||"fluid"===g.height?"fluid":[parseInt(g.width,10),parseInt(g.height,10)],i=c.defineSlot(g.path,j,h).addService(c.pubads()),g.collapseEmptyDiv&&i.setCollapseEmptyDiv(!0,!0),l(f,g.sizeMap,i),k.push(new e(h,g,i))));return k},p=function(a){return!C(a)&&(b.utils.isVisible(a)||D(a))},q=function(){return b.configuration.defineViewableAndDestroyHiddenAdSlots===!0&&!b.configuration.defineViewableAdSlots},r=function(){!1!==b.configuration.collapseEmptyDivs&&c.pubads().collapseEmptyDivs(),c.pubads().disableInitialLoad(),c.pubads().enableSingleRequest(),c.pubads().set("page_url",window.location.href.toString()),c.enableServices()},s=function(a){if(c&&c.apiReady&&g){var e,f,j=[],k=[];try{for(b.utils.performance.clearAndMark("expedia.displayads.ensurevisibleadsareloaded.start"),n(a),e=0;e<h.length;e++)G(h[e]);if(q())for(h!==d&&(i(),m(h)),h=o(a),e=0;e<h.length;e++)G(h[e]);for(e=0;e<h.length;e++)try{f=h[e].getContainer(),p(f)&&(b.utils.isViewable(f)&&(h[e].viewed=!0),h[e].reloadOnFocus===!0&&(h[e].reloadOnFocus=!1),f.setAttribute("data-loaded","true"),j.push(h[e]),k.push(h[e].id))}catch(l){b.logging.logError(l,["adAction=ensureVisibleAdsAreLoaded","adId="+h[e].id])}t(j,k)}catch(l){e!==d?b.logging.logError(l,["adAction=ensureVisibleAdsAreLoaded","adId="+h[e].id]):b.logging.logError(l,["adAction=ensureVisibleAdsAreLoaded"])}}},t=function(e,f){var g,h,i=[],j=[];try{if(e.length>0)try{if(c&&c.apiReady){var k=new b.analytics.AdCall("display",f);for(c.pubads().addEventListener("slotRenderEnded",function(c){try{if(b.utils.performance.clearAndMark("google.ads.slotRender.ended"),b.utils.performance.clearAndMeasure("Ads Requested to Ads Rendered","expedia.displayads.ensurevisibleadsareloaded.start","google.ads.slotRender.ended"),k.slotRenderedCallback(c,!0),c!==d&&c.slot!==d&&c.slot.getSlotId()!==d&&c.slot.getSlotId().getDomId()!==d&&c.isEmpty!==d){var e=a.getElementById(c.slot.getSlotId().getDomId());if(null!==e){var f=b.utils.hasClass(e,"ad-variant")?e.parentNode:e,g=e.getElementsByTagName("iframe");g&&g.length>0&&(b.configuration.title!==d?g[0].title=b.configuration.title:(b.logging.logMessage("Localized value of Advertisement is not configured"),g[0].title="Advertisement")),b.utils.toggleCollapsedExpanded(f,!c.isEmpty)}}}catch(h){b.logError(h,["adAction=googletag.slotRenderEnded"])}}),J(e),g=0;g<e.length;g++)h=e[g],h.config.lazyLoad!==!0?i.push(h.googleSlot):j.push(h.googleSlot);d===b.analytics.adsRequested&&(b.analytics.adsRequested=(new Date).getTime()),c.pubads().refresh(i,{changeCorrelator:!1}),F(j)}}catch(l){b.logging.logError(l,["adAction=googletag.pubads().refresh"])}}catch(l){b.logging.logError(l,["adAction=ensureVisibleAdsAreLoaded"])}},u=function(a){return a.config!==d&&(a.config.refreshLimit===d||a.config.refreshLimit>0)},v=function(a){var c=b.configuration.refreshAdModel.reloadByAdUnits;return c===d||c.indexOf(a.id)!==-1},w=function(a){var c,e,f=!1;try{if(b.configuration!==d&&b.configuration.refreshAdModel!==d&&b.configuration.refreshAdModel.viewedAdsOnly===!0){for(c=0;c<h.length;c++)e=h[c].getContainer(),h[c].viewed&&u(h[c])&&v(h[c])&&(h[c].reloadOnFocus=!0,h[c].viewed=!1,h[c].config.refreshLimit!==d&&h[c].config.refreshLimit>0&&h[c].config.refreshLimit--);x()}else{for(c=0;c<h.length;c++)e=h[c].getContainer(),C(e)&&u(h[c])&&(h[c].reloadOnFocus=!0,f=!0);if(f===!0)for(i(),s(a),c=0;c<h.length;c++)h[c].reloadOnFocus&&h[c].config.refreshLimit!==d&&h[c].config.refreshLimit>0&&h[c].config.refreshLimit--,h[c].reloadOnFocus=!1}}catch(g){b.logging.logError(g,["adAction=refreshAdsOnFocus"])}},x=function(){if(c&&c.apiReady&&g){var a,d,e=[],f=[];try{for(a=0;a<h.length;a++)d=h[a].getContainer(),b.utils.isViewable(d)&&(h[a].reloadOnFocus&&!h[a].viewed&&(d.setAttribute("data-loaded","true"),h[a].reloadOnFocus=!1,e.push(h[a]),f.push(h[a].id)),h[a].viewed=!0);j(e),t(e)}catch(i){b.logging.logError(i,["adAction=ensureViewableAdsAreLoaded"])}}},y=function(a){var b,c,e={};for(b in a)a.hasOwnProperty(b)&&(c=a[b],c!==d&&c.path!==d&&c.width!==d&&c.height!==d&&(e[b]=c));return e},z=function(e){f===!0?this.refresh(e):e!==d&&(b.utils.performance.clearAndMark("expedia.displayads.initialize.start"),c.cmd=c.cmd||[],!1!==b.configuration.isExpAdsToDownloadGpt&&(c.cmd.push(function(){d===b.analytics.googleTagReady&&(b.analytics.googleTagReady=(new Date).getTime())}),function(){var b=a.createElement("script");b.async=!0,b.type="text/javascript",b.src="//www.googletagservices.com/tag/js/gpt.js",a.getElementsByTagName("head")[0].appendChild(b)}()),c.cmd.push(function(){b.utils.performance.clearAndMark("google.ads.initialize.start"),H(),r(),g=!0,b.events!==d&&b.events.slotOnloadGoogleTagEvent!==d&&b.events.slotOnloadGoogleTagEvent.handlers!==d&&b.events.slotOnloadGoogleTagEvent.handlers.length>0&&A(),s(e),b.utils.performance.clearAndMark("google.ads.initialize.complete"),b.utils.performance.clearAndMeasure("google.ads.initialize.startToFinish","google.ads.initialize.start","google.ads.initialize.complete")}),f=!0,b.utils.performance.clearAndMark("expedia.displayads.initialize.complete"),b.utils.performance.clearAndMeasure("expedia.displayads.initialize.startToFinish","expedia.displayads.initialize.start","expedia.displayads.initialize.complete"))},A=function(){window.googletag&&window.googletag.apiReady&&window.googletag.pubads().addEventListener("slotOnload",function(a){a!==d&&b.events.slotOnloadGoogleTagEvent.fire(a)})},B=function(a){this.clear(),H(),this.ensureVisibleAdsAreLoaded(a)},C=function(a){return null!==a&&"true"===a.getAttribute("data-loaded")},D=function(a){return null!==a&&"true"===a.getAttribute("data-force-load")},E=function(a){var b=!0;return a&&a.config&&a.config.noRefresh&&(b=!1),b},F=function(a){var b=function(){window.uitk!==d&&"function"==typeof window.uitk.unsubscribe&&(e&&window.uitk.unsubscribe("debounced.scroll",e),a.length>0&&c&&c.apiReady&&c.pubads().refresh(a,{changeCorrelator:!1}))};if(window.uitk!==d&&"function"==typeof window.uitk.subscribe&&a.length>0)var e=window.uitk.subscribe("debounced.scroll",b)},G=function(a){var b=a.getContainer();null!==b&&"true"!==b.getAttribute("data-displayed")&&c&&c.apiReady&&(c.display(a.id),b.setAttribute("data-displayed","true"))},H=function(){var a;if(c&&c.apiReady){if(b.targeting!==d)for(a in b.targeting)!b.targeting.hasOwnProperty(a)||b.updatedTargeting!==d&&a in b.updatedTargeting||I(c.pubads(),a,b.targeting[a]);if(b.updatedTargeting&&"object"==typeof b.updatedTargeting)for(a in b.updatedTargeting)b.updatedTargeting.hasOwnProperty(a)&&I(c.pubads(),a,b.updatedTargeting[a])}},I=function(a,c,e){var f,g;if(a!==d&&c!==d&&e!==d)if(b.utils.isArray(e)){for(g=[],f=0;f<e.length;f++)g.push(String(e[f]));a.setTargeting(c,g)}else e===!0?a.setTargeting(c,"1"):e===!1?a.setTargeting(c,"0"):a.setTargeting(c,String(e))},J=function(a){var c,e,f,g,h=window.expads.configuration&&window.expads.configuration.slotTargeting?window.expads.configuration.slotTargeting:null;for(c=0;c<a.length;c++){if(e=a[c],h&&e.config){g=e.config.name&&h[e.config.name]?h[e.config.name]:{};for(var i in g)g.hasOwnProperty(i)&&(e.config.slotTargeting||(e.config.slotTargeting={}),e.config.slotTargeting[i]&&b.logging.logMessage("slot targeting overriden for ",["slotId="+e.id,"key="+i]),e.config.slotTargeting[i]=g[i])}if((b.updatedTargeting!==d||e.config!==d&&e.config.slotTargeting)&&(e.googleSlot.clearTargeting(),e.config!==d&&e.config.slotTargeting!==d))for(f in e.config.slotTargeting)e.config.slotTargeting.hasOwnProperty(f)&&I(e.googleSlot,f,e.config.slotTargeting[f])}},K=function(){return{run:function(a){try{b.analytics.creativeWindowCallback(a)}catch(c){b.logging.logError(c,["adAction=displayAds.callbackForAds"])}}}}(),L=new b.AdProduct("DisplayAds");L.initialize=z,L.clear=i,L.refresh=B,L.ensureVisibleAdsAreLoaded=s,L.filterAdSlots=y,L.refreshAdsOnFocus=w,L.ensureViewableAdsAreLoaded=x,b.registerAdProduct(L),b.callbackForAds=K}(window.document,window.expads=window.expads||{},window.googletag=window.googletag||{}),function(a,b,c){"use strict";var d,e,f;b.intentMedia=b.intentMedia||{},b.intentMedia.loaded=!1;var g=function(){if(b.slots&&b.slots.intentMedia){var a=b.slots.intentMedia;f=a.autoLoad||!1,h(f)}},h=function(a){if(b.slots&&b.slots.intentMedia){var c=b.slots.intentMedia;window.IntentMediaProperties=c.dataModel,d=c.scriptUrl,e=c.apiUrl,p(),a&&d?l():a&&e&&m()}},i=function(){b.intentMedia.loaded||h(f)},j=function(){},k=function(){},l=function(){if(window.IntentMedia&&window.IntentMedia.Event&&window.IntentMedia.Event.trigger)window.IntentMedia.Event.trigger("IntentMediaRefresh");else{var c=a.createElement("script");c.src=d,a.getElementsByTagName("head")[0].appendChild(c)}b.intentMedia.loaded=!0},m=function(){var a=window.IntentMediaProperties&&window.IntentMediaProperties.page_id||"",c=+new Date;b.utils.ajax({url:o(),done:function(c,d){a&&b.logging&&b.logging.logTrxEvent&&b.logging.logTrxEvent(a,["clEventName01=intentMediaApiCallSuccess&clEventTime01=1"])},fail:function(c){a&&b.logging&&b.logging.logError&&b.logging.logTrxEvent&&(b.logging.logError("IntentMedia API Call Error",c.status),b.logging.logTrxEvent(a,["clEventName01=intentMediaApiCallFailure&clEventTime01=0"]))},always:function(d,e){if(a&&b.logging&&b.logging.logTrxEvent){var f=+new Date-c;b.logging.logTrxEvent(a,["clEventName01=intentMediaApiCallLatency&clEventTime01="+f])}}}),b.intentMedia.loaded=!0},n=function(a){var b,d,e={};for(b in a)a.hasOwnProperty(b)&&(d=a[b],d!==c&&"intentMedia"===b&&(e[b]=d));return e},o=function(){var a,b,c=e,d=[],f=window.IntentMediaProperties;for(a in f)f.hasOwnProperty(a)&&(b=f[a],0===b.length?delete f[a]:("hotel_state_code"===a||"car_pickup_state"===a||"car_dropoff_state"===a)&&b.length>2?delete f[a]:"hotel_country_code"===a&&b.length>3?delete f[a]:d.push(encodeURIComponent(a)+"="+encodeURIComponent(b)));return d.length>0&&(c+="?"+d.join("&")),c},p=function(){window.IntentMediaProperties=window.IntentMediaProperties||{},window.IntentMediaProperties.cache_buster=Math.floor(1e7*Math.random())+ +new Date,window.IntentMediaProperties.screen_width=window.innerWidth||a.documentElement.clientWidth||a.body.clientWidth,window.IntentMediaProperties.screen_height=window.innerHeight||a.documentElement.clientHeight||a.body.clientHeight,window.IntentMediaProperties.screen_pixel_depth=window.screen.colorDepth,window.IntentMediaProperties.time_zone_offset=(new Date).getTimezoneOffset()*-1,window.IntentMediaProperties.display_format_type=a.documentElement.clientWidth>491?"Desktop":"Mobile"},q=function(){window.IntentMediaProperties=window.IntentMediaProperties||{};var a=1,b=10,d="aspp",e="adinf",f="IAID",g="|",h=r(d),i=r(e),j=r(f);if(h!==c&&h.length>0){window.IntentMediaProperties.expedia_cookie_aspp=h;var k=s(h,g,a);k!==c&&k.length>0&&(window.IntentMediaProperties.referring_site=k);var l=s(h,g,b);l!==c&&l.length>0&&(window.IntentMediaProperties.acquisition_channel=l)}if(i!==c&&i.length>0){var m=s(i,"|",2);m!==c&&m.length>0&&(window.IntentMediaProperties.is_signed_up_for_promo_email="1"===m)}j!==c&&j.length>0&&(window.IntentMediaProperties.machine_id=j)},r=function(b){if(a.cookie.length>0){var c=a.cookie.indexOf(b+"=");if(c!=-1){c=c+b.length+1;var d=a.cookie.indexOf(";",c);return d==-1&&(d=a.cookie.length),unescape(a.cookie.substring(c,d))}}return""},s=function(a,b,d){var e="";if(a!==c&&b!==c){var f=a.split(b);f.length>d&&f[d]!==c&&(e=f[d])}return e};b.intentMedia.updateDataModel=function(a){if("object"==typeof a){window.IntentMediaProperties=window.IntentMediaProperties||{};for(var b in a)a.hasOwnProperty(b)&&"function"!=typeof a[b]&&(properties[b]=a[b],0===a[b].length?delete window.IntentMediaProperties[b]:("hotel_state_code"===b||"car_pickup_state"===b||"car_dropoff_state"===b)&&a[b].length>2?delete window.IntentMediaProperties[b]:"hotel_country_code"===b&&a[b].length>3?delete window.IntentMediaProperties[b]:window.IntentMediaProperties[b]=a[b])}},b.intentMedia.invoke=function(){h(!0)},b.intentMedia.fillExitUnit=function(){"object"==typeof window.IntentMedia&&"function"==typeof window.IntentMedia.fill_exit_unit&&window.IntentMedia.fill_exit_unit()},b.intentMedia.pageIdUpdated=function(){"object"==typeof window.IntentMedia&&"function"==typeof window.IntentMedia.page_id_updated&&window.IntentMedia.page_id_updated()},b.intentMedia.isIntentMediaLoaded=function(){return"object"==typeof window.IntentMedia};var t=new b.AdProduct("IntentMediaAds");t.initialize=g,t.clear=j,t.ensureVisibleAdsAreLoaded=k,t.refresh=i,t.filterAdSlots=n,t.loadIntentMedia=h,t.reloadIMScript=l,t.callIntentMediaApi=m,t.getEncodedPropertiesUrl=o,t.addClientPropertiesToModel=p,t.addCookiePropertiesToModel=q,b.registerAdProduct(t)}(window.document,window.expads=window.expads||{}),function(a,b,c){"use strict";var d={},e={};b.events.preInitialize.attachHandler(function(){e={},b.utils.isEmptyObject(k(b.slots))||(b.utils.isLocalStorageAvailable()&&null!==window.localStorage.getItem("com.expedia.meso.targeting")?b.logging.logTrxEvent("localStorageTargeting",["localStorageTargeting=100"]):b.logging.logTrxEvent("localStorageTargeting",["localStorageTargeting=0"]))});var f=function(a){for(var b in a)a.hasOwnProperty(b)&&h(a[b])},g=function(a){if(a&&a.slots)for(var c in a.slots)if(a.slots.hasOwnProperty(c)){a.slots[c].rendered=!1;var d=w(a.slots[c].selector);null===d||b.utils.isVisible(d)||s(d)}},h=function(a){a.initialized=!1,a.adToLoad!==c&&g(a.adCalls[a.adToLoad])},i=function(a){for(var b in a)a.hasOwnProperty(b)&&"object"==typeof a[b]&&j(a[b])},j=function(a){if(a.initialized===!0)try{var c=a.adCalls[a.adToLoad],e=c.path;q(c.slots,d,e)}catch(f){b.logging.logError(f,["adAction=simplifiedAds.ensureVisibleAdsAreLoadedForSlot"])}},k=function(a){var b,d,f={};for(b in a)a.hasOwnProperty(b)&&(d=a[b],d!==c&&d.adCalls!==c&&d.adDefault!==c&&(f[b]=d));for(b in e)e.hasOwnProperty(b)&&!f.hasOwnProperty(b)&&(f[b]=e[b]);return f},l=function(a){b.analytics=b.analytics||{},c===b.analytics.simplifiedAdsRequested&&(b.analytics.simplifiedAdsRequested=(new Date).getTime());for(var d in a)a.hasOwnProperty(d)&&(m(a[d]),e[d]=a[d])},m=function(a){if(a.initialized!==!0&&a.adToLoad&&a.adCalls[a.adToLoad]){var c="";try{b.utils.performance.clearAndMark("expedia.ads.simplifiedads.requested"),c=a.adToLoad;var d=a.adCalls[c],e=d.url;b.utils.ajax({url:x(e,a.updatedTargeting,d),done:function(b){return o(b,a,c)},fail:function(){return t(a,c)},dataType:"json",encode:!1})}catch(f){b.logging.logError(f,["adAction=simplifiedAds.initializeSlot"]);try{t(a,c)}catch(g){b.logging.logError(f,["adAction=simplifiedAds.initializeSlot.errorHandler"])}}}},n=function(a,b){f(a),e={};for(var c in a)a.hasOwnProperty(c)&&(a[c].adToLoad=b);l(a)},o=function(a,c,e){try{d=a||{};var f=c.adCalls[e],g=c.adDefault;a?(p(d,f,e,g),q(f.slots,d,f.path),d.thirdPartyImpressionURL&&v(d.thirdPartyImpressionURL,d),b.events.postMarqueeCallSuccess.fire(a)):(b.logging.logMessage("adAction=simplifiedAds.successHandler pageToDisplay="+e+" no data returned from DFP"),
q(f.slots,null,f.path),t(c,e))}catch(h){b.logging.logError(h,["adAction=simplifiedAds.successHandler","pageToDisplay="+e]),t(c,e)}finally{c.initialized=!0,b.utils.performance.clearAndMark("expedia.ads.simplifiedads.rendered"),b.utils.performance.clearAndMeasure("Time to Render SimplifiedAds","expedia.ads.simplifiedads.requested","expedia.ads.simplifiedads.rendered")}},p=function(a,d,e,f){try{var g;c===b.analytics.simplifiedAdsReturned&&(b.analytics.simplifiedAdsReturned=(new Date).getTime()),b.renderedAds[d.path]={},b.renderedAds[d.path].renderedSlots=[];for(g in f.adCalls[e])f.adCalls[e].hasOwnProperty(g)&&(b.renderedAds[d.path][g]=f.adCalls[e][g]);for(g in a)a.hasOwnProperty(g)&&"string"==typeof a[g]&&(b.renderedAds[d.path][g]=a[g]);b.renderedAds[d.path].url=d.url,b.renderedAds[d.path].path=d.path,b.renderedAds[d.path].targeting=d.targeting}catch(h){b.logging.logError(h,["adAction=simplifiedAds.recordAdCall","pageToDisplay="+e])}},q=function(a,c,d){for(var e in a)if(a.hasOwnProperty(e))try{var f=a[e],g=c&&c[e]||null,h=w(f.selector);f.rendered!==!0&&(b.utils.isVisible(h)?(f.rendered=!0,g?(r(e,g,f,d),g.thirdPartyImpressionURL&&"string"==typeof g.thirdPartyImpressionURL&&g.thirdPartyImpressionURL.length>0&&v(g.thirdPartyImpressionURL,c),f.rendered=!0):f&&f.url?z(h,f):s(h)):s(h))}catch(i){throw b.logging.logError(i,["adAction=simplifiedAds.displayVisibleAds","id="+e]),i}},r=function(e,f,g,h){try{var i;d.clickThroughURL!==c&&d.clickThroughURL.length>0&&d.baseClickThroughURL!==c&&d.baseClickThroughURL.length>0&&(i=d.clickThroughURL);var j=function(a,d){d!==c&&(b.renderedAds[d]=b.renderedAds[d]||{},b.renderedAds[d].renderedSlots=b.renderedAds[d].renderedSlots||[],b.renderedAds[d].renderedSlots.indexOf(a)===-1&&b.renderedAds[d].renderedSlots.push(a))},k=function(b,c){var e=a.createElement("a"),f=a.createElement("div");e.className="clickThroughURL",e.setAttribute("href",c),f.style.width="100%",f.style.height="100%",f.style.margin="0",f.style.padding="0",e.appendChild(f),d&&d.linkOff&&("new-window"===d.linkOff?e.setAttribute("target","_blank"):"same-window"===d.linkOff&&e.setAttribute("target","_top")),y(b,"clickThroughURL"),b.appendChild(e)},l=w(g.selector);z(l,f),g.useClickThroughURL&&f.clickThroughURL!==c&&f.clickThroughURL.length>0&&f.baseClickThroughURL!==c&&f.baseClickThroughURL.length>0?k(l,f.clickThroughURL):g.useClickThroughURL&&i!==c&&i.length>0&&k(l,i),j(e,h)}catch(m){b.logging.logError(m,["adAction=simplifiedAds.populateAdContainer","path="+h,"id="+e])}},s=function(a){a&&(a.removeAttribute("data-src"),a.style.backgroundImage="",b.utils.toggleCollapsedExpanded(a,!1),y(a,"clickThroughURL"))},t=function(a,d){try{var e,f,g,h=a.adDefault,i=h.adCalls[d].slots,j=a.adCalls[d].slots;for(e in i)i.hasOwnProperty(e)&&(f=i[e],j!==c&&j[e]!==c&&(j[e].rendered=!0),g=w(f.selector),z(g,f))}catch(k){b.logging.logError(k,["adAction=simplifiedAds.errorHandler","pageToDisplay="+d])}finally{a.initialized=!0}},u=function(a){return a.indexOf("https:")>-1},v=function(a,c){try{if(!u(a))throw new Error(a+" is non-https thirdPartyImpressionURL");(new Image).src=encodeURI(a)}catch(d){var e=c,f=[];f.push("adAction=","simplifiedAds.fireImpressionBeacon"),f.push("url=",encodeURI(a)),f.push("orderId="+encodeURIComponent(e.orderID||"")),f.push("lineItemId="+encodeURIComponent(e.lineItemID||"")),f.push("creativeId="+encodeURIComponent(e.creativeID||"")),f.push("adUnitId="+encodeURIComponent(e.adUnitID||"")),b.logging.logError(d,f)}},w=function(b){return a.querySelector(b)},x=function(a,c,d){var e=function(a,c,d){var e,f,g=a,h="";try{d.targeting={};for(e in b.mergedTargeting)b.mergedTargeting.hasOwnProperty(e)&&(d.targeting[e]=b.mergedTargeting[e]);for(e in c)c.hasOwnProperty(e)&&(d.targeting[e]=c[e]);for(e in d.targeting)if(d.targeting.hasOwnProperty(e)){if(f=h.length>0?"&"+encodeURIComponent(e)+"=":""+encodeURIComponent(e)+"=",b.utils.isArray(d.targeting[e]))for(var i=0;i<d.targeting[e].length;i++)i>0&&(f+=","),f+=encodeURIComponent(d.targeting[e]);else f+=encodeURIComponent(d.targeting[e]);h+=f}h.length>0&&(h="&t="+encodeURIComponent(h),g=a.replace(/&t=[^&]*/i,h))}catch(j){b.targeting=b.targeting||{},b.logging.logError(j,["adAction=simplifiedAds.updateTargeting","url="+a,"targeting="+c,"expads.targeting="+b.targeting])}return g},f=function(a){var c;try{c=a.replace(/&c=[^&]*/i,"&c="+(new Date).getTime())}catch(d){b.logging.logError(d,["adAction=simplifiedAds.updateCacheBuster","url="+a]),c=a}return c};return a=f(a),a=e(a,c,d)},y=function(a,b){for(var c=a.children.length-1;c>-1;c--)a.children[c].className===b&&a.removeChild(a.children[c])},z=function(a,d){var e,f=d.url,g=d.altText;!a||f===c||a.style.backgroundImage!==c&&a.style.backgroundImage.indexOf(f)!==-1?a&&f!==c&&0===f.length&&(a.removeAttribute("data-src"),a.style.backgroundImage=""):(e=new Image,e.onload=function(){b.utils.performance.clearAndMark("expedia.ads.simplifiedads.rendered"),b.utils.performance.clearAndMeasure("Time to Render SimplifiedAds","expedia.ads.simplifiedads.requested","expedia.ads.simplifiedads.rendered")},e.src=f,a.setAttribute("data-src",f),a.style.backgroundImage="url("+f+")",a.setAttribute("alt",g)),b.utils.toggleCollapsedExpanded(a,f!==c&&f.length>0)},A=new b.AdProduct("SimplifiedAds");A.initialize=l,A.clear=f,A.ensureVisibleAdsAreLoaded=i,A.filterAdSlots=k,A.refresh=n,b.registerAdProduct(A)}(window.document,window.expads=window.expads||{}),function(a,b,c){"use strict";var d,e=b.utils.defer(b.ensureVisibleAdsAreLoaded),f=[],g=["(min-width: 960px)","(min-width: 726px) and (max-width: 959px)","(max-width: 725px)"],h=function(a,b){for(;a.length>0;)a.pop().removeListener(b)},i=function(){h(f,j),a.uitk!==c&&"function"==typeof a.uitk.subscribe?(m(e),n(b.utils.onScroll)):f=k(g)},j=function(a){a!==c&&a.matches===!0&&e()},k=function(a){var c,d,e,f=[];try{for(c=0;c<a.length;c++)e=l(a[c]),null!==e&&f.push(e);if(d=b.configuration.mediaQueries||[],b.utils.isArray(d))for(c=0;c<d.length;c++)e=l(d[c]),null!==e&&f.push(e)}catch(g){b.logging.logError(g,["Custom media queries not supported"])}return f},l=function(b){var d=null;return"function"==typeof a.matchMedia&&(d=a.matchMedia(b),d!==c&&"function"==typeof d.addListener&&d.addListener(j)),d},m=function(b){return d||(d=a.uitk.subscribe("mediaquery.matched",b)),d},n=function(b){return a.uitk.subscribe("debounced.scroll",b)};b.events.postInitialize.attachHandler(i),a.addEventListener?a.addEventListener("load",i,!1):a.attachEvent&&a.attachEvent("onload",i)}(window,window.expads=window.expads||{}),function(a,b,c){"use strict";expads.adtoolkit=expads.adtoolkit||{},expads.adtoolkit.initialize=function(d){expads.adtoolkit.data=expads.adtoolkit.data||{},expads.adtoolkit.data.adcontext=d,"function"==typeof a.define&&a.define.amd&&require(["jquery"],function(e){function f(b){var c,d={ville:K?"BOT":"PEOPLE",pd:N,td:M,pageName:H},e={};if(F&&(d.kuid=b.krux.getKrux(F).user),b&&b.utils&&b.utils.parseQueryParams){c=b.utils.parseQueryParams(a.location.search),e=g(c);for(var f in e)d[f]=e[f]}return d}function g(a){var b,c=["mdpcid","icmcid","affcid","olacid","semcid","emlcid"],d={},e={};for(var f in a)d[f.toLowerCase()]=a[f];for(var g=0;g<c.length;g++)b=c[g],d[b]&&(e[b]=d[b]);return e}function h(){Q&&(R&&S?O.resolve("all components loaded"):T?O.resolve("all components loaded but slotinfo failed"):D&&O.resolve("display ads disabled, skipping service calls"))}function i(a){t(a),U||(U=!0,O.reject(a))}function j(a,b,d){d!==c&&null!==d&&""!==d&&(a[b]=d)}function k(a,b,d){d!==c&&null!==d&&0!==d.length&&(a[b]=d.join(","))}function l(b){if(b=b||{},b.done=b.done||function(){},b.fail=b.fail||function(){},b.beforeSend=b.beforeSend||function(){},b.dataType=b.dataType||"",b.type=b.type||"GET",b.cache=b.cache||!1,b.xhrFields=b.xhrFields||{},b.encode===c&&(b.encode=!0),W<10&&a.XDomainRequest){b.data&&b.url?b.url=b.url+"?"+e.param(b.data):b.url=b.url||null;var d=new XDomainRequest;b.encode?d.open(b.type,encodeURI(b.url)):d.open(b.type,b.url),d.onprogress=function(){},d.ontimeout=function(){},d.onload=function(){var a=d.responseText;if(b.dataType&&"json"===b.dataType.toLowerCase()&&"string"==typeof a)try{a=JSON.parse(a)}catch(c){t("cannot parse data returned from service - ad cannot be loaded as a result")}b.done(a,d)},d.onerror=function(){b.fail(d)},d.send()}else e.ajax({url:b.url,dataType:b.dataType,data:b.data,timeout:2e3,cache:b.cache,xhrFields:b.xhrFields,beforeSend:b.beforeSend,success:b.done,error:b.fail})}function m(a){return"function"!=typeof String.prototype.trim?a.replace(/^\s+|\s+$/g,""):a.trim()}function n(){function b(b){var c,d=[];for(var f in b.slots)if(c="call to slotInfo service returned invalid data - ads cannot be loaded as a result",b.slots.hasOwnProperty(f)&&e("#"+f).length>0){var g=b.slots[f],h=e("#"+f).data("adwidth"),i=e("#"+f).data("adheight"),j=e("#"+f).data("isnative"),k=!0;if(j)k=!1;else for(var l in g.size)if(g.size.hasOwnProperty(l)){var m=g.size[l];m.width==h&&m.height==i&&(k=!1)}k?(c=f+" had an invalid size from the slotinfo service.",d.push(f),t(c)):(g.width=h,g.height=i)}for(var n in d){var o=d[n];delete b.slots[o],a.expads&&a.expads.slots&&delete a.expads.slots[o]}}var f,g=a.expads.configuration.sitePath,k=a.expads.configuration.displayAdSlots||[],m=!1,n=function(){var a;if(0!==k.length)for(f=k[0].pagePath,a=1;a<k.length;a++)if(f!==k[a].pagePath){f=c,m=!0;break}},o=function(){var b,d,e;for(a.expads.slots=a.expads.slots||{},b=0;b<k.length;b++){var f=k[b];f.id===c||""===f.id||f.width===c||""===f.width||f.height===c||""===f.height?t("a displayAd tag was missing some required data and will not be rendered"):f.pagePath===c||""===f.pagePath?t("the displayAd tag with id "+f.id+" did not specify a pagePath, but a sitePath was configured in the adConfiguration tag. Skipping this displayAd"):(d="/"+a.expads.configuration.networkId+"/"+g+"/"+f.pagePath+"/",f.slotIdOverride!==c&&""!==f.slotIdOverride?(d+=f.slotIdOverride,e=f.slotIdOverride):(d+=f.id,e=f.id),a.expads.slots[f.id]={name:e,path:d,width:f.width,height:f.height,noRefresh:f.noRefresh})}R=!0,P.resolve("eligible to make adinfo service call"),h()},p=function(){var c,d={};j(d,"siteId",E),j(d,"locale",G),j(d,"pageName",H),l({url:C+"/adinfo/slotinfo",dataType:"json",data:d,cache:!0,beforeSend:function(){c=(new Date).getTime()},done:function(d){expads.utils.performance.clearAndMark("adConfiguration.processSlotInfoServiceResponse.start");var f=(new Date).getTime()-c;u("adSlotsLatency",f),s(d,"slots")?(b(d),R=!0,P.resolve("eligible to make adinfo service call"),a.expads=a.expads||{},a.expads.slots=e.extend(!0,{},a.expads.slots,d.slots)):(P.reject("prevent adinfo targeting service call because of invalid slot info data"),T=!0),h(),expads.utils.performance.clearAndMark("adConfiguration.processSlotInfoServiceResponse.end"),expads.utils.performance.clearAndMeasure("Time to process Slot Info client side call response","adConfiguration.processSlotInfoServiceResponse.start","adConfiguration.processSlotInfoServiceResponse.end")},fail:function(){T=!0,u("adSlotsFailure","0"),h(),P.reject("prevent adinfo service call since slot info failed")}})},q=function(){a.expads.slots=a.expads.slots||{},a.expads.slots.adzerk={networkId:a.expads.configuration.adzerkNetworkId,siteId:a.expads.configuration.adzerkSiteId,placements:[]},a.expads.slots.adzerk.placements=a.expads.configuration.adzerkPlacements},r=function(a){return a&&a.slotInfo&&a.slotInfo.slots&&!expads.utils.isEmptyObject(a.slotInfo.slots)},v=function(a){expads.utils.performance.clearAndMark("adConfiguration.processProvidedSlotInfoData.start"),b(a.slotInfo),expads.slots=e.extend(!0,{},expads.slots,a.slotInfo.slots),R=!0,P.resolve("eligible to make adinfo service call"),h(),expads.utils.performance.clearAndMark("adConfiguration.processProvidedSlotInfoData.end"),expads.utils.performance.clearAndMeasure("Time to process Slot Info server side slots","adConfiguration.processProvidedSlotInfoData.start","adConfiguration.processProvidedSlotInfoData.end")};g!==c&&""!==g?o():(n(),m===!0?i("displayAd tags on the page specified different pagePaths - ads cannot be loaded as a result"):r(d)?v(d):p()),q()}function o(b,c,d){P.done(function(){"function"==typeof c&&(d=c,c={}),c=c||{},d=d||h;var g,i="call to targeting service returned invalid data - ads will be loaded without targeting";l({url:C+"/adinfo",dataType:"json",cache:!1,data:b,xhrFields:{withCredentials:!0},beforeSend:function(){g=(new Date).getTime()},done:function(b){var h=(new Date).getTime()-g;u("adInfoLatency",h),s(b,"targeting")&&require(["expads"],function(g){S=!0,a.expads.targeting=e.extend(!0,f(g),b.targeting,c),d(a.expads.targeting)})},fail:function(){u("adInfoFailure","0"),S=!0,t(i),h()}})})}function p(a){var b={};if(a)for(var c=0;c<V.length;c++){var d=V[c];a.hasOwnProperty(d)&&(b[d]=a[d],delete a[d])}return b}function q(){var a={};return v(),j(a,"siteId",E),j(a,"userId",I),J>0&&j(a,"memberId",J),k(a,"bkc",L),a}function r(){var a=q();B===!0?require(["expads.targeting"],function(b){var c=p(b);j(a,"dest",c.dest_region),o(a,b)}):o(a)}function s(a,b){return a!==c&&"object"==typeof a&&a.hasOwnProperty(b)&&a[b]!==c}function t(a){Q?require(["expads"],function(b){b.logging.logMessage(a)}):console!==c&&console.error!==c&&console.error(a)}function u(a,b){a!==c&&require(["dctk/clientLogging"],function(c){switch(a){case"adInfoLatency":c.logTrxEvent("adtkAdInfoLatency",["adtkAdInfoLatency="+encodeURIComponent(b),"adtkAdInfoSuccess=100"]);break;case"adInfoFailure":c.logTrxEvent("adtkAdInfoSuccess",["adtkAdInfoSuccess=0"]);break;case"adSlotsLatency":c.logTrxEvent("adtkAdSlotsLatency",["adtkAdSlotsLatency="+encodeURIComponent(b),"adtkAdSlotsSuccess=100"]);break;case"adSlotsFailure":c.logTrxEvent("adtkAdSlotsSuccess",["adtkAdSlotsSuccess=0"])}})}function v(){for(var a=b.cookie.split(";"),d=function(a){for(var b,d=a.split("|"),e=0;e<d.length;e++)d[e]!==c&&d[e].length>=4&&(b=d[e].split(","),b.length>=4&&("BKC"===b[2]?L.push(b[3]):"TDEST"===b[2]?M.push(b[3]):"PDEST"===b[2]&&N.push(b[3])))},e=function(a){var b=a.split("=");b.length>=2&&(I=b[1])},f=0;f<a.length;f++){var g=m(a[f]),h=g.indexOf("="),i=h>-1?m(g.substr(0,h)):c,j=h>-1?decodeURIComponent(m(g.substr(h+1))):c;if(i!==c&&j!==c)switch(i){case"MediaCookie":d(j);break;case"MC1":e(j)}}}function w(){y===!0&&require(["adtoolkit"],function(a){a.initialize()}),Q=!0,h(),A===!1&&x()}function x(){D===!1&&(n(),z===!0?r():require(["adtoolkit-user-info"],function(a){a&&(a.hasOwnProperty("memberId")&&(J=a.memberId),a.hasOwnProperty("userId")&&(I=a.userId),a.hasOwnProperty("isBot")&&(K=!0===a.isBot)),r()})),h()}d.config=d.config||{};var y=d.config.autoInitialize===c||d.config.autoInitialize,z=d.config.autoGenerateUserInfo===c||d.config.autoGenerateUserInfo,A=!!d.config.deferServiceCalls,B=!!d.config.usePageSpecificTargeting,C=d.config.adInfoServiceUrl,D=!!d.displayAdsDisabled,E=d.siteId,F=d.kruxBrand,G=d.locale,H=d.pageName,I=d.userId,J=d.memberId,K=!!d.isBot,L=[],M=[],N=[],O=new e.Deferred,P=new e.Deferred,Q=!1,R=!1,S=!1,T=!1,U=!1,V=["dest_region"];a.expads.configuration=a.expads.configuration||{},a.expads.configuration.slotTargeting=d.slotTargeting;var W=function(){for(var a=3,d=b.createElement("div"),e=d.getElementsByTagName("i");d.innerHTML="<!--[if gt IE "+ ++a+"]><i></i><![endif]-->",e[0];);return a>4?a:c}();define("adtoolkit",["expads"],function(a){return{initialize:function(){A===!0&&x(),O.done(function(){a.initialize()}).fail(function(a){console.log(a)})},refresh:function(b){if(b===c||D===!0)a.refresh();else{var d=q(),e=p(b);j(d,"dest",e.dest_region),o(d,b,function(b){a.refresh(b)})}}}}),e(b).ready(w)})}}(window,document),function(a,b){"use strict";expads.adtoolkit=expads.adtoolkit||{},expads.adtoolkit.configure=function(c){if(expads.adtoolkit.data=expads.adtoolkit.data||{},expads.adtoolkit.data.config=c,"function"==typeof a.define&&a.define.amd){var d=c.advertisementTitle,e=c.collapseEmptyDivs,f=c.breakPoints,g=c.networkId,h=c.sitePath,i=c.adzerkSiteId,j=c.adzerkNetworkId,k=c.collectorWebUrl;if(a.expads=a.expads||{},a.expads.configuration=a.expads.configuration||{},a.expads.configuration.isExpAdsToDownloadGpt=a.expads.configuration.isExpAdsToDownloadGpt||!1,a.expads.configuration.mediaQueries=a.expads.configuration.mediaQueries||[],a.expads.configuration.collapseEmptyDivs=e,a.expads.configuration.networkId=g,a.expads.configuration.adzerkSiteId=i,a.expads.configuration.adzerkNetworkId=j,a.expads.configuration.collectorWebURL=k,""!==d&&(a.expads.configuration.title=d),""!==h&&(a.expads.configuration.sitePath=h),f!==b){for(var l=0;l<f.length;l++)""!==f[l]&&a.expads.configuration.mediaQueries.push(f[l]);a.require("uitk",function(a){if(a!==b&&a.mediaquery!==b&&"function"==typeof a.mediaquery.register)for(var c=0;c<f.length;c++){var d=f[c];d&&a.mediaquery.register(d,d)}})}}}}(window),function(a,b){"use strict";"function"==typeof a.define&&a.define.amd&&define("adtoolkit/handlebars",["handlebars","adtoolkit"],function(b){function c(a){var b=!1;return a.id||(b=!0,d("id is a required parameter for the displayAd helper")),a.size||(b=!0,d("size is a required parameter for the displayAd helper")),a.size&&"fluid"!==a.size&&a.size.toLowerCase().indexOf("x")===-1&&(b=!0,d("size should have the format 'widthxheight' ")),b}function d(b){"function"==typeof a.define&&a.define.amd&&require(["expads"],function(a){a.logging.logMessage(b)})}var e=a.expads.adtoolkit.data.config.advertisementTitle||"Advertisement";return b.registerHelper("adtk:displayAd",function(d){var f=d.hash;if(!c(f)){a.expads=a.expads||{},a.expads.configuration=a.expads.configuration||{},a.expads.configuration.displayAdSlots=a.expads.configuration.displayAdSlots||[];var g,h=f.pagePath?b.Utils.escapeExpression(f.pagePath):"",i=f.classes?b.Utils.escapeExpression(f.classes):"",j=f.size.toLowerCase().split("x"),k="fluid"===f.size,l=f.collapseEmptyDiv,m=b.Utils.escapeExpression(e),n={},o="overflow:hidden;margin-left:auto;margin-right:auto;",p="";return k?(o+="width:100%;",p+=' data-isnative="true"',n.width="fluid",n.height="fluid"):(n.width=b.Utils.escapeExpression(parseInt(j[0],10)),n.height=b.Utils.escapeExpression(parseInt(j[1],10)),o+="width:"+n.width+"px;max-height:"+n.height+"px;"),l?(n.id=b.Utils.escapeExpression(f.id)+"-AD",n.slotIdOverride=b.Utils.escapeExpression(f.id),p+=' data-collapse-before-load="true"'):(n.id=b.Utils.escapeExpression(f.id),n.slotIdOverride=f.slotIdOverride?b.Utils.escapeExpression(f.slotIdOverride):""),""!==h&&(n.pagePath=h),a.expads.configuration.displayAdSlots.push(n),g=l?'<div id="'+n.slotIdOverride+'" aria-label="'+m+'" class="ad '+i+'" ><div id="'+n.id+'" data-adwidth="'+n.width+'" data-adheight="'+n.height+'" style="'+o+'"'+p+"></div></div>":'<div id="'+n.id+'" aria-label="'+m+'" class="ad '+i+'" data-adwidth="'+n.width+'" data-adheight="'+n.height+'" style="'+o+'"'+p+"></div>",new b.SafeString(g)}}),b}),expads.adtoolkit=expads.adtoolkit||{},expads.adtoolkit.registerDisplayAdHelper=function(){expads.logging&&"function"==typeof expads.logging.logMessage&&expads.logging.logMessage("Registering displayAd helpers is now done automatically. Please upgrade to the latest version of adtoolkit to stop receiving this message."),require("adtoolkit/handlebars")}}(window),function(a,b){"use strict";var c=0,d=function(b,d,e){if(a.dctk&&"function"==typeof a.dctk.evaluateExperiment){var f={id:b,callback:function(a){void 0===a.error?d&&d(a.value):d&&d(c)}};e===!0?a.dctk.evaluateExperimentAndLog(f):a.dctk.evaluateExperiment(f)}else d&&d(c)};b.checkBucket=function(a,b){d(a,b,!1)},b.checkBucketAndExpose=function(a,b){d(a,b,!0)}}(window,window.expads=window.expads||{}),function(a,b){"use strict";function c(){var a=e().trim().toLocaleLowerCase();return a.match(/staging/)||a.match(/int\-milan/)?"//adtargeting-service.test.expedia.com/adinfo":"//www.uciservice.com/adinfo"}function d(){for(var a=!1,b=document.cookie.split(";"),c=0;!a&&c<b.length;){var d=b[c],e=d.split("=");if("guid"===e[0].toLocaleLowerCase().trim()){if(a=!0,'"'===e[1].charAt(0)&&'"'===e[1].charAt(e[1].length-1)){var f=e[1].substr(1,e[1].length-2);return f.match(/\:/)?f.substr(0,f.indexOf(":")):f}return e[1]}c++}return""}function e(){var a=window.document.location.origin,b=a.indexOf("//")+2,c=a.length-1;return a.substr(b,c)}var f=a.initialize,g=!1;a.initialize=function(b){a.targeting.kuid=a.krux.getKrux("hotelscom").user;var h={always:function(c){if(g=!1,c&&c.targeting){var d=a.utils.mergeObjects(a.utils.mergeObjects(c.targeting,a.targeting),b);f(d)}else f(b)},url:c()+"?userId="+encodeURIComponent(d())+"&brand="+encodeURIComponent(e())+"&_="+Math.round(Date.now()/1e3).toString()};g===!1&&(g=!0,a.utils.ajax({url:h.url,done:h.always,fail:h.always,xhrFields:{withCredentials:!0},dataType:"json",timeout:2e3}))}}(window.expads,void 0),function(a,b,c){"use strict";a.adScriptLoaded===!0?a.logging.logMessage("The expads library is already loaded and an attempt to load it again has been made. This is an undefined use case."):(a.adScriptLoaded=!0,"function"==typeof b&&b.amd!==c&&b("expads",[],function(){return a}))}(window.expads=window.expads||{},window.define);
//# sourceURL=expads.js